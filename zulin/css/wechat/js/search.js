M.define("searchland",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(k){var f="searchland";this.formId=k.formId?k.formId:"";this.submitId=k.submitId?k.submitId:"";this.catelogyListId=k.catelogyListId?k.catelogyListId:"";this.isHome=k.isHome?k.isHome:false;this.renderId=k.renderId?k.renderId:"";this.closeSearchLandBtnId=k.closeSearchLandBtnId?k.closeSearchLandBtnId:"";this.claerKeywordBtnId=k.claerKeywordBtnId?k.claerKeywordBtnId:"";this.keywordId=k.keywordId?k.keywordId:"";this.searchPanelId=k.searchPanelId?k.searchPanelId:"";this.keyword=k.keyword?k.keyword:"";this.searchType=k.searchType?k.searchType:"";this.keywordIsObj=false;this.isSo=false;if(M.object.isObject(this.keyword)){this.keywordIsObj=true}else{this.keyword=M.string.decodeHtml(this.keyword)}this.searchHistoryLocalStorageName="searchhistory";this.searchHistoryId=M.genId(f);this.hotSearchId=M.genId(f);this.hotSearchBtn=M.genId(f);this.clearHistoryId=M.genId(f);this.hotKeyWordId=M.genId(f);this.iscategory=k.iscategory?k.iscategory:false;this.isHome=k.isHome?k.isHome:false;this.localstorage=null;this.searchHistoryListIdList=[];this.hotKeyWordBtnIds=[];this.searchliIdList=[];this.searchliTagIdList=[];this.searchHistoryList=null;this.hotKeywordIndex=0;this.searchLoop=false;this.openSearchLoad=false;this.isHistoryPanel=false;this.showFuncObj=k.showFuncObj?k.showFuncObj:null;this.hideFuncObj=k.hideFuncObj?k.hideFuncObj:null;if(window.location.href.indexOf("//so.m.jd.com")>0){this.isSo=true;this.localstorage=M.localstorage}else{var h=true;if(h){try{window.localStorage.setItem("M_test",1)}catch(i){h=false;M.log("localStorage无法set","error")}try{window.localStorage.getItem("M_test")}catch(i){h=false;M.log("localStorage无法get","error")}try{window.localStorage.removeItem("M_test")}catch(i){h=false;M.log("localStorage无法remove","error")}}var c="so.m.jd.com";if(window.location.href.indexOf("https://")>=0){c="https://"+c}else{c="http://"+c}if(h){this.isSo=false;this.localstorage=new (M.exports("remoteStorage").clazz)(c,"/solocalocalstorage.html")}else{this.isSo=true;this.localstorage=M.localstorage}}if(this.keywordIsObj){var j=this.keyword.showWord?this.keyword.showWord:"";if(this.keyword.keyword){if(this.keyword.keyword!=this.keyword.realWord){var g=M.string.decodeHtml(this.keyword.keyword);$("#"+this.keywordId).val(g)}else{$("#"+this.keywordId).val("")}}else{$("#"+this.keywordId).val("")}$("#"+this.keywordId).attr("placeholder",j)}else{$("#"+this.keywordId).val(this.keyword)}$("#"+this.keywordId).addClass("hilight1")},mainHtml:function(){var e=this;var c=[];c.push('<div id="search_land_searchland" class="search-land">');c.push("</div>");return c.join("")},loadHotKeyword:function(){var c=this;if(!c.hotKeyword){M.http.ajax({url:"//so.m.jd.com/ware/hotKeyWord.action?_format_=json",success:function(g){if(g&&g.hotKeyWord){var k=g.hotKeyWord;try{k=JSON.parse(k);var j=k.def?k.def:[];var f=k.owner?k.owner:[];if(j.length>0){c.hotKeyword=j;if(f.length>0){for(var h=0;h<f.length;h++){if(f[h].hotWord&&f[h].num&&f[h].num<=j.length){if(M.object.isString(f[h].hotWord)){c.hotKeyword[f[h].num-1]=f[h].hotWord}}else{if(M.object.isString(f[h].hotWord)){c.hotKeyword.push(f[h].hotWord)}}}}}else{c.hotKeyword=[];if(f.length>0){for(var h=0;h<f.length;h++){c.hotKeyword.push(f[h].hotWord)}}}}catch(l){c.hotKeyword=[]}}else{c.hotKeyword=[]}c.searchHotKeyHtml()},error:function(){c.hotKeyword=[];c.searchHotKeyHtml()}})}else{c.searchHotKeyHtml()}},searchHotKeyHtml:function(){var f=this;var e=[];if(f.hotKeyword&&f.hotKeyword.length>0){f.hotKeyWordBtnIds=[];e.push('<div id="'+f.hotSearchId+'" class="hot-search">');e.push('<div class="hot-search-head cf">');e.push("<p>热门搜索</p>");e.push('<i class="around-pic" id="'+f.hotSearchBtn+'"></i>');e.push("</div>");e.push('<div id="'+f.hotKeyWordId+'" class="hot-search-tags">');for(var c=0;c<6&&c<f.hotKeyword.length;c++){var g="searchland_hotKeywordList_"+c;f.hotKeyWordBtnIds.push(g);f.hotKeywordIndex=c;e.push("<span>");e.push('<a href="javascript:void(0);" id="'+g+'"><i>'+f.hotKeyword[c]+"</i></a>");e.push("</span>")}}e.push("</div>");e.push("</div>");$("#search_land_searchland").append(e.join(""));f.searchHotKeyBind()},searchHotKeyBind:function(){var e=this;if(e.hotKeyWordBtnIds.length>0){for(var c=0;c<e.hotKeyWordBtnIds.length;c++){$("#"+e.hotKeyWordBtnIds[c]).on("click",function(){var f=$.trim($(this).text());if(f!=""){e.searchLandSubmit(f,"MSearch_HotWords")}})}$("#"+e.hotSearchBtn).on("click",function(){var g=0;var k=[];for(var h=e.hotKeywordIndex+1,f=h+6;h<f&&h<e.hotKeyword.length;h++){g++;e.hotKeywordIndex=h;k.push(e.hotKeyword[h])}if(g<6){for(var h=0,f=6-g;h<f&&h<e.hotKeyword.length;h++){g++;e.hotKeywordIndex=h;k.push(e.hotKeyword[h])}}$(this).addClass("turn-around");e.sendMping("MSearch_ChangeKeyWords");setTimeout(function(){$("#"+e.hotSearchBtn).removeClass("turn-around")},800);var l=$("#"+e.hotKeyWordId).find("a");e.searchLandHotKeywordRecursiveFade(l,k,0,g)})}},searchLandHotKeywordRecursiveFade:function(c,h,e,g){var j=this;if(e<g){for(var f=e;f<g;f++){if(f<=2){$(c[f]).find("i").addClass("move1")}else{$(c[f]).find("i").addClass("move2")}}setTimeout(function(){for(var k=e;k<g;k++){if(k<=2){$(c[k]).find("i").text(h[k])}}},310);setTimeout(function(){for(var k=e;k<g;k++){if(k<=2){$(c[k]).find("i").removeClass("move1")}}},500);setTimeout(function(){for(var k=e;k<g;k++){if(k>2){$(c[k]).find("i").text(h[k])}}},410);setTimeout(function(){for(var k=e;k<g;k++){if(k>2){$(c[k]).find("i").text(h[k]);$(c[k]).find("i").removeClass("move2")}}},750)}},searchHistoryHtml:function(g){var h=this;var f=[];try{h.searchHistoryList=JSON.parse(g)}catch(j){h.searchHistoryList=null;h.localstorage.remove(h.searchHistoryLocalStorageName)}if(h.searchHistoryList!=null&&!M.object.isArray(h.searchHistoryList)){h.searchHistoryList=null;h.localstorage.remove(h.searchHistoryLocalStorageName)}if(h.searchHistoryList&&h.searchHistoryList.length>0){f.push('<div id="'+h.searchHistoryId+'" class="recent-search">');f.push('<div class="recent-search-head cf">');f.push("<p>最近搜索</p>");f.push('<i id="'+h.clearHistoryId+'" class="garbage-pic"></i>');f.push("</div>");f.push('<div class="recent-search-tags">');h.searchHistoryListIdList=[];for(var c=0;c<h.searchHistoryList.length;c++){var k="searchland_searchHistoryList_"+c;h.searchHistoryListIdList.push(k);f.push("<span>");f.push('<a id="'+k+'" searchland_index="'+c+'" href="javascript:void(0);">'+h.searchHistoryList[c].text+"</a>");f.push("</span>")}f.push("</div>");f.push("</div>")}$("#search_land_searchland").html(f.join(""));h.searchHistoryBind();h.loadHotKeyword()},searchHistoryBind:function(){var e=this;if(e.searchHistoryListIdList&&e.searchHistoryListIdList.length>0){for(var c=0;c<e.searchHistoryListIdList.length;c++){$("#"+e.searchHistoryListIdList[c]).on("click",function(){var f=$(this).attr("searchland_index");var g=e.searchHistoryList[f];e.searchLandSubmit(g,"MSearch_HistoryRecords")})}$("#"+e.clearHistoryId).on("click",function(){e.sendMping("MSearch_ClearHistory");if(confirm("确定要清空吗?")){e.sendMping("MSearch_ClearHistoryConfirm");e.clearHistory();$("#"+e.controlId).html("");$("#"+e.clearHistoryId).parent().parent().attr("style","display:none;")}else{e.sendMping("MSearch_ClearHistoryCancel")}})}},searchLoadControl:function(){var e=this;var c=$("#"+e.keywordId).val().trim();if(c==""&&e.searchLoop){$("#"+e.claerKeywordBtnId).attr("style","display:none;");if(!e.isHistoryPanel){e.searchHistoryFromStorage(e.searchHistoryHtml);e.isHistoryPanel=true}}else{if(c!=""&&e.oldkeyword!=c&&e.searchLoop){$("#"+e.claerKeywordBtnId).attr("style","");e.searchKeyLoad(c)}}setTimeout(function(){e.searchLoadControl()},500)},searchKeyLoad:function(c){var e=this;e.searchLoop=false;e.oldkeyword=c;e.searchLocalStorage=false;M.http.ajax({url:"//so.m.jd.com/ware/searchSuggestion.action",data:{keyword:c,_format_:"json"},success:function(g){if(g&&g.searchTipList&&e.openSearchLoad){var f=JSON.parse(g.searchTipList);if(f.length>0){e.tipArray=f;$("#search_land_searchland").html(e.serchKeyHtml(e.tipArray));e.serchKeyBind()}e.searchLoop=true;e.isHistoryPanel=false}else{if(e.openSearchLoad){e.searchLoop=true;e.isHistoryPanel=false}}},error:function(f){if(e.openSearchLoad){e.searchLoop=true;e.isHistoryPanel=false}}})},serchKeyHtml:function(n){var c=this;c.searchliIdList=[];var f=[];if(n&&n.length>0){f.push('<ul class="association-normal">');for(var k=0;k<n.length;k++){var e="searchland_li_"+k;c.searchliIdList.push(e);var m=n[k].text;f.push('<li searchland_index="'+k+'" id="'+e+'">');f.push('<a href="javascript:void(0);">');var l="association-product-name";if(n[k].otherAttr){if(n[k].otherAttr.isSearchShop){f.push('<i class="shop-pic"></i>');l="association-shop-name"}}f.push('<span class="'+l+'">'+m+"</span>");if(n[k].otherAttr&&n[k].otherAttr.tag&&n[k].otherAttr.tag.length>0){for(var h=0;h<n[k].otherAttr.tag.length&&h<3;h++){if(n[k].otherAttr.tag[h].tagsearchquery&&n[k].otherAttr.tag[h].tagshowquery){var g=M.genId("searchland_li_tag");c.searchliTagIdList.push(g);f.push('<span pingparam="'+(h+1)+'" id="'+g+'" tagsearchquery="'+n[k].otherAttr.tag[h].tagsearchquery+'" class="association-product-btn">'+n[k].otherAttr.tag[h].tagshowquery+"</span>")}}}f.push("</a>");f.push("</li>")}f.push("</ul>")}return f.join("")},serchKeyBind:function(e){var f=this;if(f.searchliIdList.length>0){for(var c=0;c<f.searchliIdList.length;c++){$("#"+f.searchliIdList[c]).on("click",function(k){var i=$(this).attr("searchland_index");var j=f.tipArray[i];var h="MSearch_SearchDropDownAssociationalWords";if(j.otherAttr&&j.otherAttr.isSearchShop){h="MSearch_Shopsearch"}f.searchLandSubmit(j,h)})}}if(f.searchliTagIdList.length>0){while(f.searchliTagIdList.length>0){var g=f.searchliTagIdList.pop();$("#"+g).on("click",function(j){var i=$(this).attr("tagsearchquery");var h=$(this).attr("pingparam");f.sendMping("MSearch_AssociationLabel",{event_param:h,event_level:"2"});f.searchLandSubmit(i);j.stopPropagation()})}}},sendMping:function(g,c){if(g){try{var h=new MPing.inputs.Click(g);if(c){h=M.object.merge(h,c)}var f=new MPing();f.send(h)}catch(i){}}},clearHistory:function(){var c=this;c.localstorage.remove(c.searchHistoryLocalStorageName)},searchHistoryFromStorage:function(f){var g=this;if(g.isSo){var c=g.localstorage.get(g.searchHistoryLocalStorageName);f.call(g,c)}else{try{g.localstorage.get(g.searchHistoryLocalStorageName,function(i,e){f.call(g,e)})}catch(h){f.call(g,null)}}},searchLandSubmit:function(c,e){var g=this;var f=null;var h=null;if(M.object.isObject(c)){h=c;f=JSON.parse(h.value)}else{h={};f={};if(g.keywordIsObj&&c==g.keyword.showWord){h.text=g.keyword.showWord;f.keyword=g.keyword.realWord;h.value=JSON.stringify(f);h.text=c}else{f.keyword=c;h.value=JSON.stringify(f);h.text=c}}if(f.keyword){g.sendMping(e,{event_param:f.keyword});$("#"+g.keywordId).val(f.keyword);f.catelogyList&&$("#"+g.catelogyListId).val(JSON.stringify(f.catelogyList));g.searchLandAddHistory(h,function(){var i=this;if(h.otherAttr&&h.otherAttr.isSearchShop){$("#"+i.formId).attr("action","//so.m.jd.com/shop/searchShop.action")}else{$("#"+i.formId).attr("action","//so.m.jd.com/ware/search.action")}$("#"+i.formId).submit();i.searchLoop=false})}},searchLandAddHistory:function(f,c){var e=this;e.searchHistoryFromStorage(function(j){var k=this;try{j=JSON.parse(j)}catch(l){j=null;try{k.localstorage.remove(k.searchHistoryLocalStorageName)}catch(l){}}if(!M.object.isArray(j)){j=null;k.localstorage.remove(k.searchHistoryLocalStorageName)}f.text=k.makeSearchName(f.text);delete f.tipNumber;if(j&&j.length>0){var g=[f];for(var h=0;h<j.length;h++){if(g.length==18){break}if(j[h].text!=f.text){g.push(j[h])}}j=g}else{j=[];j.push(f)}k.localstorage.set(k.searchHistoryLocalStorageName,JSON.stringify(j));c.call(k)})},makeSearchName:function(c){if(c.length>=30){c=c.substring(0,30)}return c},searchTransformation:function(){var g=this;if(!g.openSearchLoad){var c=$("body").children("div");$("body").removeClass("hide-landing");$("body").addClass("show-landing");$("body").addClass("history-color");if(!g.isHome){$("#layout_appdown").attr("style","display:none;")}for(var e=0;e<c.length;e++){if($(c[e]).attr("id")!="search_land_searchland"&&!$(c[e]).attr("search_land_searchTransformation_show")){$(c[e]).attr("style","display:none;")}}$("body").children("footer").attr("style","display:none;");if(g.showFuncObj&&g.showFuncObj.func){var f=g.showFuncObj.source?g.showFuncObj.source:null;g.showFuncObj.func.call(f)}$("#"+g.searchPanelId).removeClass("on-blur");$("#"+g.searchPanelId).addClass("on-focus");window.scrollTo(0,1);g.openSearchLoad=true;g.searchLoop=true;g.isHistoryPanel=false}else{$("body").removeClass("show-landing");$("body").removeClass("history-color");$("body").addClass("hide-landing");var c=$("body").children("div");if(!g.isHome&&!$("#layout_appdown").attr("search_land_searchTransformation_show")){$("#layout_appdown").attr("style","")}$("#search_land_searchland").html("");for(var e=0;e<c.length;e++){if($(c[e]).attr("id")!="search_land_searchland"&&!$(c[e]).attr("search_land_searchTransformation_show")){$(c[e]).attr("style","")}}$("body").children("footer").attr("style","");if(g.hideFuncObj&&g.hideFuncObj.func){var f=g.hideFuncObj.source?g.hideFuncObj.source:null;g.hideFuncObj.func.call(f)}g.openSearchLoad=false;g.searchLoop=false;g.searchLocalStorage=false;g.isHistoryPanel=false;g.oldkeyword="";$("#"+g.controlId).html("");$("#"+g.searchPanelId).removeClass("on-focus");$("#"+g.searchPanelId).addClass("on-blur");$("#"+g.hotKeyWordId).show();$("#"+g.hotKeyWordheadId).show()}},render:function(){var c=this;if(M.object.isObject(c.renderId)||M.object.isArray(c.renderId)){$(c.renderId).append(c.mainHtml())}else{$("#"+c.renderId).append(c.mainHtml())}$("body").addClass((c.isHome?"mhome":""));$("body").addClass("hide-landing");$("#"+c.keywordId).on("click",function(h){var f=null;if(c.isHome){if(c.openSearchLoad){f="MSearch_Search"}else{f="MHome_Search"}}else{if(!c.searchType){if(c.iscategory){f="MFilter_Search"}else{f="MProductList_Search"}}else{if(c.searchType=="pinpai"){f="MSearchBrand_Search"}}}c.sendMping(f);if(!c.openSearchLoad){if(c.landSearchWordHide){$("#"+c.keywordId).val("")}else{var i=c.keyword;if(c.keywordIsObj){i=c.keyword.showWord?c.keyword.showWord:"";if(c.keyword.keyword){if(c.keyword.keyword!=c.keyword.realWord){var g=M.string.decodeHtml(c.keyword.keyword);$("#"+c.keywordId).val(g)}else{$("#"+c.keywordId).val("")}}$("#"+c.keywordId).attr("placeholder",i)}else{$("#"+c.keywordId).val(i)}}c.searchTransformation()}});$("#"+c.keywordId).on("keydown",function(g){if(g.keyCode=="13"){var f=$.trim($("#"+c.keywordId).val());var h=$.trim($("#"+c.keywordId).attr("placeholder"));if(f==""&&h!=""){f=h}if(f!=""){c.searchLandSubmit(f,"MSearch_Searchthi")}}return});$("#"+c.closeSearchLandBtnId).on("click",function(){if(c.openSearchLoad){c.searchTransformation();c.sendMping("MSearch_Back");var f=c.keyword;if(c.keywordIsObj){f=c.keyword.showWord?c.keyword.showWord:"";if(c.keyword.keyword){if(c.keyword.keyword!=c.keyword.realWord){var e=M.string.decodeHtml(c.keyword.keyword);$("#"+c.keywordId).val(e)}else{$("#"+c.keywordId).val("")}}else{$("#"+c.keywordId).val("")}$("#"+c.keywordId).attr("placeholder",f)}else{$("#"+c.keywordId).val(f)}$("#"+c.keywordId).addClass("hilight1")}});$("#"+c.submitId).on("click",function(){var f=$.trim($("#"+c.keywordId).val());var g=$.trim($("#"+c.keywordId).attr("placeholder"));if(f==""&&g!=""){f=g}if(f!=""){var e=null;if(c.isHome){if(c.openSearchLoad){e="MSearch_SearchButton"}else{e="MHome_SearchButton"}}else{e="MSearch_SearchButton"}c.searchLandSubmit(f,e)}});$("#"+c.keywordId).on("keyup",function(){if($(this).val()!=c.keyword){$(this).removeClass("hilight1");$(this).addClass("hilight2")}else{$(this).removeClass("hilight2");$(this).addClass("hilight1")}});$("#"+c.claerKeywordBtnId).on("click",function(){c.sendMping("MSearch_Clear",{event_param:""});$("#"+c.keywordId).val("");$("#"+c.keywordId)[0].focus();$(this).attr("style","display:none;")});c.searchLoadControl()}});a.clazz=b});M.define("search",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(i){i.searchitempanel.searchItem=i.searchData.searchFilter;i.data=i.searchData.wareList;this.baseId="search";this.isOrder=false;this.keyword=i.keyword?i.keyword:"";this.searchListCanScroll=true;this.headIsShow=true;this.scrollStar=0;this.scrollEnd=0;this.scrollTopGreater=false;this.headStyle="";this.ItemValue={stock:1,sort:""};this.formUrl=i.formUrl;if(i.areanameClose){M.cookie.delCookie("regionAddress")}$("#layout_root").parent().css({overflow:"hidden"});if(i.activityId){this.isOrder=true;this.orderTitle=i.activityTip;this.ItemValue={stock:1,sort:"",skuId:i.skuId}}this.coverSpaceId=M.genId(this.baseId);$("#layout_searchForm").attr("action",this.formUrl);$("#layout_head").after('<div id="'+this.coverSpaceId+'" class="cover-space""></div>');this.keyWord=null;var l=null;if(this.isOrder){this.keyWord=this.keyword;$("#layout_appdown").attr("search_land_searchtransformation_show","1");$("#layout_appdown").css("display","none");$("#layout_jdBar").hide();$("#layout_clear_keyword").hide();$("#layout_search_submit").show();$("#layout_jdKey").hide();if(i.sirKey){$("#layout_clear_keyword").show();$("#layout_clear_keyword").attr("href",this.formUrl+"?skuId="+i.skuId+"&activitySTip="+i.activityTip+"&activityId="+i.activityId)}$("#layout_newkeyword").attr("name","sirKey");$("#layout_newkeyword").attr("report-eventid","MShopcartsale_Search");$("#layout_newkeyword").addClass("J_ping");$("#layout_newkeyword").attr("placeholder","搜索促销商品");$("#layout_newkeyword").val(i.sirKey);$("#layout_clear_keyword").after('<input type="hidden" name="activityId" value="'+i.activityId+'" >');$("#layout_clear_keyword").after('<input type="hidden" name="activitySTip" value="'+i.activityTip+'" >');$("#layout_clear_keyword").after('<input type="hidden" name="skuId" value="'+i.skuId+'" >')}else{if(i.jdSupermarket||(i.cid&&i.field)){var n=M.url.getParam("showWord");var f=M.url.getParam("realWord");if(n&&f){l={};l.showWord=n;l.realWord=f}if(l){this.keyWord=l;this.keyWord.keyword=this.keyword}else{this.keyWord=this.keyword}this.jdSupermarket=i.jdSupermarket?true:false;this.cid=i.cid?true:false;this.field=i.field?true:false;$("#layout_appdown").attr("search_land_searchtransformation_show","1");$("#layout_appdown").css("display","none");$("#layout_jdBar").hide();$("#layout_clear_keyword").hide();$("#layout_search_submit").show();$("#layout_jdKey").hide();var m=this.keyWord.showWord?this.keyWord.showWord:"";$("#layout_newkeyword").attr("placeholder",m);var p=this.keyword;$("#layout_newkeyword").val(p);if(i.jdSupermarket){$("#layout_clear_keyword").after('<input type="hidden" name="jdSupermarket" value="'+i.jdSupermarket+'" >')}if(i.cid&&i.field){$("#layout_clear_keyword").after('<input type="hidden" name="cid" value="'+i.cid+'" >');$("#layout_clear_keyword").after('<input type="hidden" name="field" value="'+i.field+'" >')}if(n&&f){$("#layout_clear_keyword").after('<input type="hidden" name="realWord" value="'+f+'" >');$("#layout_clear_keyword").after('<input type="hidden" name="showWord" value="'+n+'" >')}}else{l=i.searchBoxWord;if(l){this.keyWord=l;this.keyWord.keyword=this.keyword}else{this.keyWord=this.keyword}var g=$("#layout_search_head");if(g&&g.length>0){this.searchLand=new (M.exports("searchland").clazz)({showFuncObj:{source:this,func:function(){var r=this;r.searchListCanScroll=false;$("#"+r.coverSpaceId).css("display","none");$("#layout_jdBar").attr("style","display:none;");$("#layout_urlblack").attr("style","display:none;");$("#layout_search_bar_cancel").attr("style","display:block;");$("#layout_clear_keyword").attr("style","display:block;");$("#layout_search_submit").attr("style","display:block;");$("#seach_list_root").attr("style","display:none;");$("#"+r.searchSort.getPanelId()).attr("style","display:none;");$("#"+r.searchSort.getMoreSortPanelId()).addClass("displayNone");r.searchCoverPannel.hide();r.headStyle={display:$("#layout_head").css("display"),transform:$("#layout_head").css("transform"),"-webkit-transform":$("#layout_head").css("-webkit-transform"),"-webkit-transition":"",transition:""};$("#layout_head").attr("style","");r.searchFastScreen.render();$("#"+r.searchSort.getMoreSortPanelId()).addClass("displayNone");r.searchCoverPannelHide();r.searchFastScreenShow=false;$("#layout_head").css("position","relative");$("#"+r.searchFastScreen.getRootId()).attr("style","display:none;");$("#"+r.searchFastScreen.getBranchId()).html("")}},hideFuncObj:{source:this,func:function(){var r=this;$("#"+r.coverSpaceId).css("display","block");$("#"+r.searchSort.getPanelId()).attr("style","");$("#layout_search_bar_cancel").attr("style","");$("#layout_urlblack").attr("style","");$("#seach_list_root").attr("style","");$("#layout_clear_keyword").attr("style","display:none;");$("#layout_search_submit").attr("style","display:none;");r.headStyle=$("#layout_head").css(r.headStyle);$("#layout_head").css("position","");$("#"+r.searchFastScreen.getRootId()).attr("style","");setTimeout(function(){if(!$("#layout_appdown").attr("search_land_searchtransformation_show")&&r.scrollEnd<=85){$("#layout_appdown").show()}window.scrollTo(0,r.scrollTop);r.searchListCanScroll=true},10)}},claerKeywordBtnId:"layout_clear_keyword",renderId:"saerchLand",keyword:this.keyWord,submitId:"layout_search_submit",formId:"layout_searchForm",catelogyListId:"layout_category",keywordId:"layout_newkeyword",isHome:false,closeSearchLandBtnId:"layout_search_bar_cancel",searchPanelId:"layout_search_head"})}}}var k=false;var q=M.localstorage.get("search_item");q=JSON.parse(q);if(!q){q={baseParams:i.baseParams,timeStamp:i.timeStamp,item:this.ItemValue};M.localstorage.set("search_item",JSON.stringify(q))}else{var o=q.baseParams;var h=q.timeStamp;if(o==i.baseParams&&h==i.timeStamp){this.ItemValue=q.item;k=true}else{q={baseParams:i.baseParams,timeStamp:i.timeStamp,item:this.ItemValue};M.localstorage.set("search_item",JSON.stringify(q))}}this.searchCoverPannel=new (M.exports("searchCoverPannel").clazz)({source:this,func:function(){var r=this;if(r.searchFastScreenShow){r.searchFastScreen.render();$("#"+r.searchSort.getMoreSortPanelId()).addClass("displayNone");r.searchCoverPannelHide();r.searchFastScreenShow=false}else{if(r.searchitempanelShow){r.searchitempanel.hide();r.searchitempanelShow=false}else{$("#"+r.searchSort.getMoreSortPanelId()).addClass("displayNone");r.searchCoverPannelHide()}}}});$("#layout_root").append(this.searchCoverPannel.html());this.searchCoverPannel.bindClick();this.searchSort=new (M.exports("searchSort").clazz)({isOrder:this.isOrder,moreSort:{source:this,func:function(){var r=this;if(r.searchSort.moreSortPanelShow()){r.searchCoverPannelShow();r.searchFastScreen.render()}else{r.searchCoverPannelHide()}}},sales:{source:this,func:function(){var r=this;r.searchCoverPannelHide();r.searchFastScreen.render();r.reload()}},prcie:{source:this,func:function(){var r=this;r.searchCoverPannelHide();r.searchFastScreen.render();r.reload()}},comprehensive:{source:this,func:function(){var r=this;r.searchCoverPannelHide();r.searchFastScreen.render();r.reload()}},newItem:{source:this,func:function(){var r=this;r.searchCoverPannelHide();r.searchFastScreen.render();r.reload()}},evaluate:{source:this,func:function(){var r=this;r.searchCoverPannelHide();r.searchFastScreen.render();r.reload()}},moreOption:{source:this,func:function(){var r=this;r.searchFastScreenShow=false;$("#"+r.searchFastScreen.getBranchId()).html("");r.searchitempanel.show();r.searchFastScreen.render()}}},this.ItemValue);$("#layout_head").append(this.searchSort.searchSortHtml());$("#layout_head").append(this.searchSort.searchMoreSortHtml());i.isOrder=this.isOrder;i.keyword=this.keyword;i.renderId="seach_list";var e={itemShowFuncObj:{source:this,func:function(){var r=this;r.searchFastScreenShow=true;r.searchListCanScroll=false;$("#"+r.searchSort.getMoreSortPanelId()).addClass("displayNone");r.searchCoverPannelShow()}},itemHideFuncObj:{source:this,func:function(){var r=this;r.searchFastScreenShow=false;window.scrollTo(0,r.scrollTop);r.searchCoverPannelHide()}},itemSubmitFuncObj:{source:this,func:function(){var r=this;r.searchFastScreenShow=false;r.searchCoverPannelHide();r.reload(false)}}};var j={itemShowFuncObj:{source:this,func:function(){var r=this;r.searchitempanelShow=true;r.searchCoverPannelShow();$("#pannel").parent().removeClass("displayNone");$("#pannel").children().css({left:"100%"});setTimeout(function(){var s={"-webkit-transition":"left 0.3s ease",transition:"left 0.3s ease",left:"0%"};$("#pannel").children().css(s);setTimeout(function(){var t={"-webkit-transition":"",transition:"",left:"0%"};$("#pannel").children().css(t)},310)},50)}},itemHideFuncObj:{source:this,func:function(){var r=this;r.searchitempanelShow=false;setTimeout(function(){var s={"-webkit-transition":"left 0.3s ease",transition:"left 0.3s ease",left:"100%"};$("#pannel").children().css(s);setTimeout(function(){var t={"-webkit-transition":"",transition:"",left:"100%"};$("#pannel").children().css(t);$("#layout_head").addClass("max-zindex");$("#pannel").parent().addClass("displayNone");r.searchCoverPannelHide()},310)},100)}},itemSubmitFuncObj:{source:this,func:function(){var r=this;r.searchitempanelShow=false;r.searchCoverPannel.hide();setTimeout(function(){var s={"-webkit-transition":"left 0.3s ease",transition:"left 0.3s ease",left:"100%"};$("#pannel").children().css(s);setTimeout(function(){var t={"-webkit-transition":"",transition:"",left:"100%"};$("#pannel").children().css(t);$("#layout_head").addClass("max-zindex");$("#pannel").parent().addClass("displayNone");r.searchCoverPannelHide();r.reload(false)},310);r.searchFastScreen.render()},50)}}};i.searchitempanel.openPromotion=i.openPromotion?true:false;this.searchFastScreen=new (M.exports("searchFastScreen").clazz)(i.searchitempanel,e,this.ItemValue);this.searchitempanel=new (M.exports("searchitempanel").clazz)(i.searchitempanel,j,this.ItemValue);var c=this;setTimeout(function(){var w=$("#"+c.searchFastScreen.getRootId());var s=$("#layout_search_head");var r=0;if(w&&w.length>0){r=177}else{r=135}if(s&&s.length>0){r=r}else{r=r-45-50}if(i.qq_appdown_close){var x=navigator.userAgent.match(/MQQBrowser\/([\d\.]+)/)?true:false;var u=navigator.userAgent.indexOf("MicroMessenger")>=0;if(x&&!u){var v=document.createEvent("HTMLEvents");v.initEvent("click",!1,!1),$("#layout_close_appdown")[0].dispatchEvent(v)}}if($("#layout_appdown").length==0||$("#layout_appdown").css("display")=="none"){r=r-50}var t={transform:"translateY(0px)","-webkit-transform":"translateY(0px)"};$("#layout_head").css(t);$("#"+c.coverSpaceId).css({height:r})},1);this.searchList=new (M.exports("searchList").clazz)(i);if(k){this.reload(false)}var c=this;this.params=this.createSearchParams();if(!this.searchList.noMoreDate&&$("#seach_list_root").height()<=$(window).height()){this.setIntervalId=setInterval(function(){if(!c.searchList.noMoreDate&&$("#seach_list_root").height()<=$(window).height()){c.searchList.load(c.createSearchParams())}else{clearInterval(c.setIntervalId)}},50)}this.params=this.createSearchParams()},bind:function(){var e=this;$("#layout_close_appdown").on("click",function(){$("#"+e.coverSpaceId).css({height:$("#"+e.coverSpaceId).height()-50})});var c=document.referrer;if(this.isOrder&&c){if(c.indexOf("//p.m.jd.com/")>0){$("#layout_urlblack").off();$("#layout_urlblack").on("click",function(){var f=M.cookie.getCookie("sid");window.location.href="http://p.m.jd.com/cart/cart.action?sid="+f})}}if(e.isOrder||e.jdSupermarket||(e.cid&&e.field)){$("#layout_search_submit").on("click",function(){if($.trim($("#layout_newkeyword").val())){$("#layout_searchForm").submit()}else{if(e.keyWord&&e.keyWord.realWord){$("#layout_newkeyword").val(e.keyWord.realWord);$("#layout_searchForm").submit()}}})}e.scrollBind()},searchCoverPannelShow:function(){var c=this;c.searchListCanScroll=false;$("html").css({height:"100%"});$("#"+c.coverSpaceId).addClass("displayNone");$("#layout_head").css({position:"relative"});c.searchCoverPannel.show()},searchCoverPannelHide:function(){var c=this;$("html").css({height:""});window.scrollTo(0,c.scrollTop);c.searchListCanScroll=true;$("#"+c.coverSpaceId).removeClass("displayNone");$("#layout_head").css({position:""});c.searchCoverPannel.hide()},scrollFunction:function(){var f=this;var i=false;if(f.searchLand&&!f.searchLand.openSearchLoad){i=true}else{if(!f.searchLand){i=true}else{i=false}}if(!f.searchList.loadDateIng&&f.searchListCanScroll&&i){f.searchList.toLoadDate(f.createSearchParams());f.scrollTop=$(window).scrollTop();f.scrollStar=f.scrollEnd;f.scrollEnd=$(window).scrollTop();f.scrollTopGreater=f.scrollEnd>$(window).height();if(f.scrollEnd>$(window).height()){f.searchList.showToTop()}else{f.searchList.hideToTop()}if(!f.isOrder){if(f.pagenumShowTimeOutId){clearTimeout(f.pagenumShowTimeOutId);f.pagenumShowTimeOutId=null}if(f.scrollStar!=f.scrollEnd){f.pagenumShowTimeOutId=setTimeout(function(){f.searchList.hidePageNum()},1000);f.searchList.showPageNum(f.scrollStar,f.scrollEnd)}}var h=$("#"+f.searchFastScreen.getRootId());var c=$("#layout_search_head");if(f.headIsShow&&f.scrollTopGreater&&f.scrollStar<f.scrollEnd){var g=177;if(h&&h.length>0){g=177-42}else{g=177}if(c&&c.length>0){g=g}else{g=g-45}if((c&&c.length>0)&&$("#layout_jdBar").css("display")!="none"){g=g+57}if(!c||c.length==0||$("#layout_appdown").css("display")=="none"){g=g-50}var e={transform:"translateY(-"+g+"px)","-webkit-transform":"translateY(-"+g+"px)","-webkit-transition":"0.5s ease 0s",transition:"0.5s ease 0s"};$("#layout_head").css(e);f.headIsShow=false}if(!f.headIsShow&&f.scrollStar>f.scrollEnd&&f.scrollTopGreater){var g=50;if(!c||c.length==0||$("#layout_appdown").css("display")=="none"){g=g-50}var e={transform:"translateY(-"+g+"px)","-webkit-transform":"translateY(-"+g+"px)","-webkit-transition":"0.5s ease 0s",transition:"0.5s ease 0s"};$("#layout_head").css(e);f.headIsShow=true}if(!f.headIsShow&&(f.scrollEnd<=$(window).height()/2)||!f.scrollTopGreater){var e={display:"block",transform:"translateY(0px)","-webkit-transform":"translateY(0px)","-webkit-transition":"0.5s ease 0s",transition:"0.5s ease 0s"};$("#layout_head").css(e);f.headIsShow=true}}},scrollBind:function(){var c=this;$(window).on("scroll",function(){c.scrollFunction()})},reload:function(c){var f=this;var e=M.localstorage.get("search_item");if(e){e=JSON.parse(e);e.item=f.ItemValue;M.localstorage.set("search_item",JSON.stringify(e));if(c){f.searchSort.claerSort()}}var g=f.createSearchParams();if(f.params!=g){f.params=g;f.searchList.reload(f.createSearchParams(),function(){$("#layout_head").css({transform:"translateY(0px)","-webkit-transform":"translateY(0px)","-webkit-transition":"",transition:""});window.scrollTo(0,0)})}},createSearchParams:function(){var c=this;var e=[];M.object.each(c.ItemValue,function(o,m){e.push(m);if(m!="region"){if(M.object.isArray(o)){e.push("=[");for(var l=0,h=o.length,n=h-1;l<h;l++){e.push(o[l].m_value);if(l<n){e.push(",")}}e.push("]&")}else{e.push("=");e.push(o);e.push("&")}}else{var f="";var k=o.length;for(var l=0;l<o.length;l++){f=f+o[l]+","}for(var l=k;l<4;l++){f=f+undefined+","}f=f.length>1?f.substring(0,f.length-1):f;M.cookie.setCookie("regionAddress",encodeURI(f),30,"/",".m.jd.com");if(o&&o.length>0){e.push("=");e.push(o[o.length-1]);e.push("&")}else{e.push("=");e.push("&")}}});return e.join("")},run:function(){var c=this;c.searchLand&&c.searchLand.render();c.searchSort.bind();c.searchList.render();c.bind()}});a.clazz=b});M.define("searchCoverPannel",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(c){this.isshow=false;this.id=M.genId("SearchCoverPannel");this.searchCoverPannelClickFunctionobj=c},html:function(){var e=this;var c=[];c.push('<div id="'+e.id+'"  class="mjd-floor cover-pannel displayNone">');c.push('<div class="cover-floor "></div>');c.push("</div>");return c.join("")},bindClick:function(){var c=this;$("#"+c.id).on("click",function(){if(c.searchCoverPannelClickFunctionobj&&c.searchCoverPannelClickFunctionobj.func){var e=c.searchCoverPannelClickFunctionobj.source?c.searchCoverPannelClickFunctionobj.source:null;c.searchCoverPannelClickFunctionobj.func.call(e)}});$("#"+c.id).on("touchmove",function(g){g.stopPropagation();g.preventDefault();if(c.searchCoverPannelClickFunctionobj&&c.searchCoverPannelClickFunctionobj.func){var f=c.searchCoverPannelClickFunctionobj.source?c.searchCoverPannelClickFunctionobj.source:null;c.searchCoverPannelClickFunctionobj.func.call(f)}})},isShow:function(){var c=this;return c.isshow},show:function(){var c=this;c.isshow=true;$("#"+c.id).removeClass("displayNone")},hide:function(){var c=this;c.isshow=false;$("#"+c.id).addClass("displayNone")}});a.clazz=b});M.define("searchFastScreen",function(b){var a=function(f,c,e){this.init(f,c,e)};M.object.merge(a.prototype,{init:function(f,c,e){this.baseId="searchFastScreen";this.itemValue=e;this.searchItem=f.searchItem;this.itemShowFuncObj=c&&c.itemShowFuncObj?c.itemShowFuncObj:null;this.itemHideFuncObj=c&&c.itemHideFuncObj?c.itemHideFuncObj:null;this.itemSubmitFuncObj=c&&c.itemSubmitFuncObj?c.itemSubmitFuncObj:null;this.openPromotion=f.openPromotion?true:false;this.rootId=M.genId(this.baseId);this.branchId=M.genId(this.baseId);this.render()},render:function(){var c=this.optionHtml();if(c){if($(".custom-search-tab").length>0){$(".custom-search-tab").html(c)}else{$(".new-search-tab").after('<ul id="'+this.rootId+'" class="custom-search-tab bdr-bom ">'+c+"</ul>")}$(".custom-info-list").addClass("displayNone");$(".custom-ftw").addClass("displayNone");this.optionBind()}},optionHtml:function(){var c=this;var n=[];var o=1;if(c.searchItem&&c.searchItem.filterItemAttrs&&c.searchItem.filter){if(!c.itemValue.self||c.itemValue.self==0){n.push('    <li class="custom-search-iteam jd-send J_ping" report-eventid="MList_SecondaryFilterJDDelivery" mkey="self" classfly="京东配送"><span><i class="ok"></i>京东配送</span></li>')}else{n.push('    <li class="custom-search-iteam jd-send active J_ping" report-eventid="MList_SecondaryFilterJDDelivery" mkey="self" classfly="京东配送"><span><i class="ok"></i>京东配送</span></li>')}if(c.searchItem.filterItemPromotion){var e=c.searchItem.filterItemPromotion;o++;if(c.openPromotion){if(e.imgUrl&&e.promotionId&&e.name){if(c.itemValue.promotionID&&c.itemValue.promotionID==e.promotionId){n.push('    <li class="custom-search-iteam jd-free J_ping active" report-eventid="MList_Promotionday" report-eventparam="'+e.promotionId+'" mkey="promotionId" mvalue="'+e.promotionId+'" classfly="活动" promotionName = "'+e.name+'" ><span><img src="'+e.imgUrl.replace(/http:/g,"")+'"> </span></li>')}else{n.push('    <li class="custom-search-iteam jd-free J_ping" report-eventid="MList_Promotionday" report-eventparam="'+e.promotionId+'" mkey="promotionId" mvalue="'+e.promotionId+'" classfly="活动" promotionName = "'+e.name+'" ><span><img src="'+e.imgUrl.replace(/http:/g,"")+'"> </span></li>')}}}}for(var m=0;m<c.searchItem.filterItemAttrs.length&&o<4;m++){for(var h=0;h<c.searchItem.filter.length;h++){if(c.searchItem.filterItemAttrs[m]==c.searchItem.filter[h].classfly&&c.searchItem.filter[h].key!="catelogyList"){o++;var p=false;var f="";if(c.itemValue[c.searchItem.filter[h].key]&&c.itemValue[c.searchItem.filter[h].key].length>0){var l=c.itemValue[c.searchItem.filter[h].key];for(var g=0;g<l.length;g++){if(l[g].m_classfly==c.searchItem.filterItemAttrs[m]){p=true;if(f==""){f=l[g].text}else{f=f+","+l[g].text}}}}if(p){n.push('    <li class="custom-search-iteam jd-downM J_ping active" report-eventlevel="3" report-eventid="MList_SecondaryFilter" report-eventparam="'+c.searchItem.filterItemAttrs[m]+'" mkey="'+c.searchItem.filter[h].key+'" classfly="'+c.searchItem.filterItemAttrs[m]+'"><span><strong class="inline-span"><i class="down"></i>'+f+"</strong></span></li>")}else{n.push('    <li class="custom-search-iteam jd-downM J_ping" report-eventlevel="3" report-eventid="MList_SecondaryFilter" report-eventparam="'+c.searchItem.filterItemAttrs[m]+'"  mkey="'+c.searchItem.filter[h].key+'" classfly="'+c.searchItem.filterItemAttrs[m]+'"><span><strong class="inline-span"><i class="down"></i>'+c.searchItem.filterItemAttrs[m]+"</strong></span></li>")}}}}}return n.join("")},optionBind:function(){var c=this;$(".custom-search-tab").find("li").on("click",function(){var f=$(this).attr("classfly");var g=$(this).attr("mkey");if(f=="京东配送"){if($(this).hasClass("active")){c.itemValue[g]=0;$(this).removeClass("active")}else{c.itemValue[g]=1;$(this).addClass("active")}if(c.itemShowFuncObj&&c.itemShowFuncObj.func){var e=c.itemShowFuncObj.source?c.itemShowFuncObj.source:null;c.itemShowFuncObj.func.call(e)}c.itemSubmitBind();c.render()}else{if(f=="活动"){var h=$(this).attr("mvalue");if($(this).hasClass("active")){$(this).removeClass("active");c.itemValue.promotionID=null}else{c.itemValue.promotionID=h;$(this).addClass("active")}if(c.itemShowFuncObj&&c.itemShowFuncObj.func){var e=c.itemShowFuncObj.source?c.itemShowFuncObj.source:null;c.itemShowFuncObj.func.call(e)}c.render();c.itemSubmitBind()}else{if($(this).hasClass("show")){$(this).removeClass("show");c.render();if(c.itemHideFuncObj&&c.itemHideFuncObj.func){var e=c.itemHideFuncObj.source?c.itemHideFuncObj.source:null;c.itemHideFuncObj.func.call(e)}}else{c.itemDate(f,g);$(".custom-search-tab").find("li").each(function(j,k){$(k).removeClass("show")});$(this).addClass("show")}}}})},itemHtml:function(r,s){var c=this;var u=[];u.push('    <ul class="custom-info-list">');for(var t=0;t<c.searchItem.filter.length;t++){var v=c.searchItem.filter[t].classfly;if(v==r){var e=c.searchItem.filter[t].itemArray;for(var o=0;o<1;o++){var q=e[o].termList;var w=0;for(var n=0;n<q.length;n++){var g=false;if(c.itemValue&&c.itemValue[s]){var p=c.itemValue[s];for(var m=0;m<p.length;m++){if(p[m].m_classfly=="品牌"){if(p[m].m_classfly==q[n].value.key&&p[m].text==q[n].value.value){g=true}}else{var f=$.parseJSON(p[m].m_value.replace(/\'/g,'"'));if(f.key==q[n].value.key&&f.value==q[n].value.value){g=true}}}}var h=JSON.stringify(q[n].value).replace(/\"/g,"'");if(g){u.push('        <li mindex="'+w+'" mtype="searchItem" mkey="'+s+'" mvalue="'+h+'" mclassfly="'+r+'" class="sidebar-iteam J_ping checked" report-eventparam="'+q[n].text+'" report-eventlevel="3" report-eventid="MList_SecondaryFilterFloat"><a href="javascript:void(0);"><span class="sort-of-brand">'+q[n].text+'</span><i class="tick"></i></a></li>')}else{u.push('        <li mindex="'+w+'" mtype="searchItem" mkey="'+s+'" mvalue="'+h+'" mclassfly="'+r+'" class="sidebar-iteam J_ping" report-eventparam="'+q[n].text+'" report-eventlevel="3" report-eventid="MList_SecondaryFilterFloat"><a href="javascript:void(0);"><span class="sort-of-brand">'+q[n].text+'</span><i class="tick"></i></a></li>')}w++}}}}u.push("    </ul>");u.push('    <div class="custom-ftw  bdr-t"><a class="J_ping" report-eventparam="" report-eventid="MList_SecondaryFilterFloatReset" id="reset" href="javascript:void(0);">重置</a><a id="custom-qure" class="custom-qure J_ping" report-eventparam="" report-eventid="MList_SecondaryFilterFloatConfirm" href="javascript:void(0);">确定</a></div>');return u.join("")},itemDate:function(h,g){var f=this;var c=f.itemHtml(h,g);if($(".custom-search-box").length>0){$(".custom-search-box").html(c)}else{$("#layout_head").append('<div id="'+f.branchId+'" class="custom-search-box show-position">'+c+"</div>")}f.itemBind();if(f.itemShowFuncObj&&f.itemShowFuncObj.func){var e=f.itemShowFuncObj.source?f.itemShowFuncObj.source:null;f.itemShowFuncObj.func.call(e)}},itemBind:function(){var c=this;$(".cover-floor").on("touchmove",function(e){e.preventDefault()},false);$(".cover-floor").unbind("touchmove");$(".custom-info-list").find("li").on("click",function(){var f=1;$(this).parent("ul").find("li").each(function(h,g){if($(g).hasClass("checked")){f++}});if(!$(this).hasClass("checked")&&f>5){alert("最多选择5个哦~");return}var e=$.trim($(this).find("span").eq(0).text());if($(this).hasClass("checked")){$(this).removeClass("checked")}else{$(this).addClass("checked")}});$("#reset").on("click",function(){$(this).parent().prev().find("li").each(function(e,f){if($(f).hasClass("checked")){$(f).removeClass("checked")}})});$("#custom-qure").on("click",function(){var r=$(this).parent().prev().find("li");if(r.length>0){var m=r[0];var l=$(m).attr("mkey")||"";var q=$(m).attr("mclassfly")||"";if(l&&l!=null&&c.itemValue&&c.itemValue[l]&&c.itemValue[l].length>0){for(var n=0;n<c.itemValue[l].length;n++){if(c.itemValue[l][n].m_classfly==q){c.itemValue[l].splice(n,1);n--}}}}for(var n=0;n<r.length;n++){var m=r[n];if(!$(m).hasClass("checked")){continue}var f=$(m).attr("mtype")||"";var g=$(m).attr("mvalue")||"";var e=$(m).attr("mclassfly")||"";var p=$.trim($(m).find("span").eq(0).text());var l=null;$(".custom-search-tab").find("li").each(function(j,s){if($(s).hasClass("show")){l=$(s).attr("mkey")}});if(!c.itemValue[l]){c.itemValue[l]=[]}var o=false;for(var k=0;k<c.itemValue[l].length;k++){var h=c.itemValue[l][k];if(h.m_key==l&&h.m_value==g){o=true;break}}if(!o){c.itemValue[l].push({m_key:l,m_value:g,m_type:f,text:p,m_classfly:e})}}c.itemSubmitBind();c.render()})},itemShow:function(f){var e=this;e.keepBeFore();e.itemDate(f);if(e.itemShowFuncObj&&e.itemShowFuncObj.func){var c=e.itemShowFuncObj.source?e.itemShowFuncObj.source:null;e.itemShowFuncObj.func.call(c)}},itemHide:function(){var e=this;e.reBeFore();if(e.itemHideFuncObj&&e.itemHideFuncObj.func){var c=e.itemHideFuncObj.source?e.itemHideFuncObj.source:null;e.itemHideFuncObj.func.call(c,val)}},itemSubmitBind:function(){var e=this;if(e.itemSubmitFuncObj&&e.itemSubmitFuncObj.func){var e=this;var c=e.itemSubmitFuncObj.source?e.itemSubmitFuncObj.source:null;e.itemSubmitFuncObj.func.call(c,e.itemValue)}},reItem:function(e){var c=this;if(e){c.itemValue[e]=[]}else{for(key in c.itemValue){delete c.itemValue[key]}}$(".custom-search-tab").find("li").each(function(f,g){if($(g).hasClass("show")){$(g).trigger("click")}})},setItemValue:function(c,f){var e=this;e.itemValue[c]=f},keepBeFore:function(){var c=this;c.render()},reBeFore:function(){var c=this;c.render()},getRootId:function(){var c=this;return c.rootId},getBranchId:function(){var c=this;return c.branchId}});b.clazz=a});M.define("searchitempanel",function(a){var b=function(f,c,e){this.init(f,c,e)};M.object.merge(b.prototype,{init:function(f,c,e){this.baseId="searchitempanel";this.panelRootId=M.genId(this.baseId);this.panelHeadCheckId=M.genId(this.baseId);this.panelHeadId=M.genId(this.baseId);this.panelHeadTitleId=M.genId(this.baseId);this.panelHeadBlackId=M.genId(this.baseId);this.itemPanelContainerId=M.genId(this.baseId);this.itemPanelResetId=M.genId(this.baseId);this.areaTextId=M.genId(this.baseId);this.areaClickId=M.genId(this.baseId);this.itemRootId=M.genId(this.baseId);this.subitemId=M.genId(this.baseId);this.catelogyListId=M.genId(this.baseId);this.allCategoriesId=M.genId(this.baseId);this.thirdallCategoriesId=M.genId(this.baseId);this.region=M.cookie.getCookie("regionAddress");this.region=this.region?this.region.split(","):[];this.areaBaesKey="m_saerch_area_";this.regionTextLocalstorageKey="m_saerch_area_regionText";this.areaRegionId=M.genId(this.areaBaesKey+"_areaRegionId");this.regionTextId=M.genId(this.areaBaesKey+"_regionTextId");this.priceMinId=M.genId(this.baseId+"price");this.priceMaxId=M.genId(this.baseId+"price");this.brandlistId=M.genId(this.baseId);this.regionIndexObj={getProvinces:0,getCitys:1,getCountys:2,getTowns:3};this.tempRegion=[];this.regionTextArr=[];this.regionArr=[];this.regionText=f.regionText?f.regionText:"不限";this.itemValue=e;this.searchItem=f.searchItem;this.itemShowFuncObj=c&&c.itemShowFuncObj?c.itemShowFuncObj:null;this.itemHideFuncObj=c&&c.itemHideFuncObj?c.itemHideFuncObj:null;this.itemSubmitFuncObj=c&&c.itemSubmitFuncObj?c.itemSubmitFuncObj:null;this.categories=[];this.searchRadioArray=[];this.panelCreateRadioArray(f.searchRadio,this.itemValue)},itemPanelRootHtml:function(){var e=this;var c=[];c.push('<div id="'+e.panelRootId+'" class="sidebar-content">');c.push(e.itemPanelHeadHtml());c.push(e.itemPanelContainerHtml());c.push("</div>");return c.join("")},itemPanelHeadHtml:function(){var e=this;var c=[];c.push('<div id="'+e.panelHeadId+'" class="sidebar-header bdr-bom">');c.push('    <div class="sidebar-header-left arrow-left"><span id="'+e.panelHeadBlackId+'"></span></div>');c.push('    <div class="sidebar-header-center"><span id="'+e.panelHeadTitleId+'">筛选</span></div>');c.push('    <div class="sidebar-header-right" report-eventparam="" report-eventid="" id="'+e.panelHeadCheckId+'"><span>确定</span></div>');c.push("</div>");return c.join("")},setPanelHeadTitle:function(e){var c=this;$("#"+c.panelHeadTitleId).text(e)},itemPanelContainerHtml:function(){var e=this;var c=[];c.push('<div id="'+e.itemPanelContainerId+'" class="sidebar-items-container">');c.push(e.areaPanelContainerHtml());c.push(e.panelRedioContainerHtml());c.push(e.panelItemRootHtml());c.push("</div>");return c.join("")},areaPanelContainerHtml:function(){var e=this;var c=[];c.push('<ul id="'+e.areaClickId+'" class="sidebar-list bdr-t" report-eventparam="" report-eventid="MFilter_Sendto" style="display: block;">');c.push('		<li id="'+e.areaRegionId+'" class="sidebar-iteam bdr-bom">');c.push('			<a href="javascript:void(0);"><i class="arrow"></i><span class="sort-of-brand">配送至</span><small id="'+this.areaTextId+'" class="sort-of-brand">'+e.regionText+"</small></a>");c.push("		</li>");c.push("</ul>");return c.join("")},bindAreaPanelContainerHtml:function(){var c=this;$("#"+c.areaClickId).on("click",function(){})},setAreaText:function(c){var e=this;$("#"+e.areaTextId).text(c)},panelRedioContainerHtml:function(){var f=this;var e=[];if(f.searchRadioArray&&f.searchRadioArray.length>0){e.push('<ul class="sidebar-unit bdr-b" style="display: block;">');for(var c=0;c<f.searchRadioArray.length;c++){e.push(f.searchRadioArray[c].html())}e.push("</ul>")}return e.join("")},panelCreateRadioArray:function(c,h){var f=this;if(c&&M.object.isArray(c)&&c.length>0){for(var e=0;e<c.length;e++){if(f.isOrder&&c[e].key=="promotion"){continue}if(c[e].isCheck){if(h[c[e].key]==0){c[e].isCheck=false}}else{if(h[c[e].key]==1){c[e].isCheck=true}}var g=new (M.exports("searchItemPanelRadio").clazz)(c[e],h);f.searchRadioArray.push(g)}}},panelCreateRadioBind:function(){var e=this;if(e.searchRadioArray&&e.searchRadioArray.length>0){for(var c=0;c<e.searchRadioArray.length;c++){e.searchRadioArray[c].bind()}}},getItemText:function(f,g){var h=this;var j="不限";if(f&&g&&h.itemValue[f]){var e=[];var i=h.itemValue[f];for(var c=0;c<i.length;c++){if(g==i[c].m_classfly){e.push(i[c].text)}}j=e.join(",");if(j==""){j="不限"}}return j},panelItemRootHtml:function(){var g=this;var f=[];f.push('<ul id="'+g.itemRootId+'" class="sidebar-list bdr-t" style="display: block;">');var c=g.searchItem.filter;g.categories=[];if(c.length>0){for(var e=0;e<c.length;e++){if(c[e].key=="catelogyList"){g.categories.push(c[e])}}if(g.categories.length>0){f.push('<li id="'+g.allCategoriesId+'" m_classfly="全部分类" m_type="categories" m_key="" class="sidebar-iteam bdr-bom J_ping" report-eventparam="" report-eventid="MFilter_AllCategories"><a href="javascript:void(0);"><i class="arrow"></i><span class="sort-of-brand">全部分类</span><small class="sort-of-brand"></small></a></li>')}for(var e=0;e<c.length;e++){if(c[e].key=="catelogyList"){g.categories.push(c[e])}else{var h=g.getItemText(c[e].key,c[e].classfly);f.push('<li m_classfly="'+c[e].classfly+'" m_type="searchItem" m_key="'+c[e].key+'" class="sidebar-iteam bdr-bom"><a href="javascript:void(0);"><i class="arrow"></i><span class="sort-of-brand">'+c[e].classfly+'</span><small class="sort-of-brand">'+h+"</small></a></li>")}}}f.push("</ul>");f.push('<div class="sidebar-clear-settings" style="display: block;"><span report-eventparam="" report-eventid="MFilter_Reset" class="sidebar-btn-reset J_ping" id="'+g.itemPanelResetId+'">清除选项</span></div>');return f.join("")},itemRootBind:function(){var c=this;$("#"+c.itemRootId).find("li").on("click",function(){var n=[];var t=$(this).attr("m_classfly");c.setPanelHeadTitle(t);var p=[];p=c.searchItem.filter;if(p.length>0){if(t=="全部分类"){n.push('<ul id="'+c.catelogyListId+'" class="sidebar-list bdr-t" style="display: block;">');for(var m=0;m<p.length;m++){if(p[m].key=="catelogyList"){var s=c.getItemText(p[m].key,p[m].classfly);n.push('<li m_classfly="'+p[m].classfly+'" m_type="searchItem" m_key="'+p[m].key+'" class="sidebar-iteam bdr-bom"><a href="javascript:void(0);"><i class="arrow"></i><span class="sort-of-brand">'+p[m].classfly+'</span><small class="sort-of-brand">'+s+"</small></a></li>")}}n.push(" </ul>")}else{for(var m=0;m<p.length;m++){if(t==p[m].classfly){var o=p[m].itemArray;if(o.length>1){n.push('<ul id="'+c.brandlistId+'" class="brand-list bdr-b"><li m_unchick="1" class="brand-tab"><span m_index="0" report-eventparam="" report-eventid="MFilter_RecommentBrand"  class="J_ping" data-ul=""><label class="current brand-seled" classfly="'+t+'">'+o[0].itemName+'</label></span><em class="divide-line"></em><span m_index="1" report-eventparam="" report-eventid="MFilter_SortByAlphabet" id="MFilter_SortByAlphabet" class="J_ping" data-ul=""><label  classfly="'+t+'">'+o[1].itemName+"</label></span></li></ul>")}n.push('<ul id="'+c.subitemId+'" class="sidebar-list" style="display: block;">');var e=false;for(var h=0;h<o[0].termList.length;h++){var r=o[0].termList[h];if(h==0){n.push('<li class="sidebar-letter bdr-bom"><span>'+r.sign+"</span></li>")}var f=JSON.stringify(r.value);f=f.replace(/\"/g,"'");var l=c.itemValue[p[m].key];var q="";if(l){for(var g=0;g<l.length;g++){if(l[g].text==r.text){q=true}if(l[g].m_value.inputprice){e=l[g].m_value}}}if(q){n.push('<li m_classfly="'+p[m].classfly+'" m_type="searchItem" class="sidebar-iteam bdr-bom J_ping checked" report-eventparam="'+r.text+'" report-eventid="MFilter_Filters" m_value="'+f+'" m_key="'+p[m].key+'"><a href="javascript:void(0);"><i class="tick"></i><span class="sort-of-brand">'+r.text+"</span></a></li>")}else{n.push('<li m_classfly="'+p[m].classfly+'" m_type="searchItem" class="sidebar-iteam bdr-bom J_ping" report-eventparam="'+r.text+'" report-eventid="MFilter_Filters" m_value="'+f+'" m_key="'+p[m].key+'"><a href="javascript:void(0);"><i class="tick"></i><span class="sort-of-brand">'+r.text+"</span></a></li>")}}if(p[m].key=="price"){if(e){n.push('<li m_unchick="1" class="price-range bdr-bom"><i class="tick"></i><span><input id="'+c.priceMinId+'" type="number" value="'+e.min+'" pattern="[0-9]*" placeholder="起始价格"><i>-</i><input id="'+c.priceMaxId+'" value="'+e.max+'" type="number" pattern="[0-9]*" placeholder="终止价格"></span></li>')}else{n.push('<li m_unchick="1" class="price-range bdr-bom"><i class="tick"></i><span><input id="'+c.priceMinId+'" type="number" value="" pattern="[0-9]*" placeholder="起始价格"><i>-</i><input id="'+c.priceMaxId+'" value="" type="number" pattern="[0-9]*" placeholder="终止价格"></span></li>')}}n.push(" </ul>")}}}}$("#"+c.itemPanelContainerId).html(n.join(""));c.brandItemBind();$("#"+c.catelogyListId).find("li").on("click",function(){var v=[];var G=$(this).attr("m_classfly");v.push('<ul id="'+c.thirdallCategoriesId+'" class="sidebar-list bdr-t" style="display: block;">');var D=c.searchItem.filter;for(var B=0;B<D.length;B++){var C=D[B].itemArray;if(D[B].key!="catelogyList"||D[B].classfly!=G){continue}for(var z=0;z<C.length;z++){var u=C[z].termList;for(var x=0;x<u.length;x++){var F=u[x];var w=JSON.stringify(F.value);w=w.replace(/\"/g,"'");var A=c.itemValue.catelogyList;var E=false;if(A){for(var y=0;y<A.length;y++){if(A[y].text==F.text){E=true}}}if(E){v.push('<li m_classfly="'+D[B].classfly+'" m_type="searchItem" class="sidebar-iteam bdr-bom J_ping checked" report-eventparam="'+F.text+'" report-eventid="MFilter_Filters" m_value="'+w+'" m_key="'+D[B].key+'"><a href="javascript:void(0);"><i class="tick"></i><span class="sort-of-brand">'+F.text+"</span></a></li>")}else{v.push('<li m_classfly="'+D[B].classfly+'" m_type="searchItem" class="sidebar-iteam bdr-bom J_ping"  report-eventparam="'+F.text+'" report-eventid="MFilter_Filters" m_value="'+w+'" m_key="'+D[B].key+'"><a href="javascript:void(0);"><i class="tick"></i><span class="sort-of-brand">'+F.text+"</span></a></li>")}}}}v.push("</ul>");$("#"+c.itemPanelContainerId).html(v.join(""));$("#"+c.thirdallCategoriesId).find("li").on("click",function(){if($(this).hasClass("checked")){$(this).removeClass("checked")}else{$(this).addClass("checked")}var k=$(this).attr("m_key");var K=$(this).attr("m_value");var J=$(this).attr("m_type");var I=$.trim($(this).find("span").eq(0).text());var H=$(this).attr("m_classfly");if(k&&k!=null&&c.itemValue[k]){for(var j=0;j<c.itemValue[k].length;j++){if(c.itemValue[k][j].m_value==K){c.itemValue[k].splice(j,1);return}}}if(!c.itemValue[k]){c.itemValue[k]=[]}c.itemValue[k].push({m_key:k,m_value:K,m_type:J,text:I,m_classfly:H})})});$("#"+c.brandlistId).find("label").on("click",function(){if($(this).hasClass("current brand-seled")){return}else{$(this).parent().parent().find("label").removeClass("current brand-seled");$(this).addClass("current brand-seled")}var F=$(this).attr("classfly");var E=$(this).text();var B=c.searchItem.filter;var z=[];for(var y=0;y<B.length;y++){if(F==B[y].classfly){var A=B[y].itemArray;z.push('<ul id="'+c.subitemId+'" class="sidebar-list" style="display: block;">');for(var w=0;w<A.length;w++){if(A[w].itemName==E){for(var v=0;v<A[w].termList.length;v++){var D=A[w].termList[v];if(v==0){z.push('<li class="sidebar-letter bdr-bom"><span>'+D.sign+"</span></li>")}var u=JSON.stringify(D.value);u=u.replace(/\"/g,"'");var x=c.itemValue[B[y].key];var C="";if(x){for(var j=0;j<x.length;j++){if(x[j].text==D.text){C=true}}}if(C){z.push('<li m_classfly="'+B[y].classfly+'" m_type="searchItem" class="sidebar-iteam bdr-bom checked" m_value="'+u+'" m_key="'+B[y].key+'"><a href="javascript:void(0);"><i class="tick"></i><span class="sort-of-brand">'+D.text+"</span></a></li>")}else{z.push('<li m_classfly="'+B[y].classfly+'" m_type="searchItem" class="sidebar-iteam bdr-bom" m_value="'+u+'" m_key="'+B[y].key+'"><a href="javascript:void(0);"><i class="tick"></i><span class="sort-of-brand">'+D.text+"</span></a></li>")}}}}z.push(" </ul>");$("#"+c.brandlistId).next().html(z.join(""))}}c.brandItemBind()})});$("#"+c.panelHeadBlackId).on("click",function(){c.regionTextArr=[];if($("#"+c.areaRegionId)&&$("#"+c.areaRegionId).length>0){c.hide()}else{c.show(1)}});$("#"+c.itemPanelResetId).on("click",function(){c.keepBeFore()});$("#"+c.panelHeadCheckId).on("click",function(){var e=$("#"+c.itemPanelContainerId).find("li");var k=null;for(var u=0;u<e.length;u++){var w=e[u];var g=$(w).attr("m_value");var o=$(w).attr("m_type");var p=$.trim($(w).find("span").eq(0).text());var x=$(w).attr("m_classfly");var k=$(w).attr("m_key");if(!$(w).hasClass("checked")||!g){var l=c.itemValue[k];if(l&&l.length>0){for(var s=0;s<l.length;s++){var y=l[s];if(y&&y.m_value==g){c.itemValue[k].splice(s,1)}}}continue}if(!c.itemValue[k]||k=="price"){c.itemValue[k]=[]}var h=false;for(var s=0;s<c.itemValue[k].length;s++){var m=c.itemValue[k][s];if(m.m_key==k&&m.m_value==g){h=true;break}}if(!h){c.itemValue[k].push({m_key:k,m_value:g,m_type:o,text:p,m_classfly:x})}}if($("#"+c.priceMinId)&&M.string.isUnsignedNumeric($("#"+c.priceMinId).val())&&$("#"+c.priceMaxId)&&M.string.isUnsignedNumeric($("#"+c.priceMaxId).val())){var q=Number($("#"+c.priceMinId).val());var t=Number($("#"+c.priceMaxId).val());if(q>t){q=q+t;t=q-t;q=q-t}var g={min:q+"",max:t+"",inputprice:"true"};var k="price";var x="价格";var o="searchItem";var p=q+"-"+t;c.itemValue.price=[];c.itemValue.price.push({m_key:k,m_value:JSON.stringify(g),m_type:o,text:p,m_classfly:x})}if($("#"+c.areaRegionId)&&$("#"+c.areaRegionId).length>0){var n=[];c.itemValue;for(key in c.itemValue){if(key!=="catelogyList"){var f=c.itemValue[key];if(key=="expressionKey"){var v={};for(var r=0;r<f.length;r++){if(f[r].m_classfly=="品牌"){if(!v[f[r].m_classfly]){v[f[r].m_classfly]=[]}v[f[r].m_classfly].push(f[r].m_classfly+":"+f[r].text)}}for(key in v){if(key){n.push(v[key].join(","))}}}else{if(key=="price"){for(var r=0;r<f.length;r++){n.push(f[r].m_classfly+":"+f[r].text)}}else{if(key=="expandName"){var v={};for(var r=0;r<f.length;r++){if(!v[f[r].m_classfly]){v[f[r].m_classfly]=[]}v[f[r].m_classfly].push(f[r].m_classfly+":"+f[r].text)}for(key in v){if(key){n.push(v[key].join(","))}}}}}}}if(n.length>0){n=n.join(";")}c.sendMping("MFilter_Confirm",{event_param:n});c.submitBind()}else{if($("#pannel").hasClass("max-zindex")){$("#pannel").addClass("max-zindex")}$("#layout_head").removeClass("max-zindex");$("#pannel").removeClass("displayNone");c.show(1)}});$("#"+c.areaRegionId).on("click",function(){c.getAreaData("getProvinces",0)})},sendMping:function(g,c){if(g){try{var h=new MPing.inputs.Click(g);if(c){h=M.object.merge(h,c)}var f=new MPing();f.send(h)}catch(i){}}},getAreaData:function(h,i){var g=this;var e=false;if(h){var c=g.areaBaesKey+h+"_"+i;var f=M.localstorage.get(c);if(f){f=JSON.parse(f);if(f.length>0){g.areaItemRender(h,f)}else{g.regionText=g.regionTextArr.join("");g.regionTextArr=[];g.itemValue.region=g.regionArr;g.regionArr=[];g.show(1)}}else{g.loadArea(h,i)}}else{g.regionText=g.regionTextArr.join("");g.regionTextArr=[];g.show(1);g.itemValue.region=g.regionArr;g.regionArr=[]}},loadArea:function(e,f){var c=this;M.http.ajax({url:"/ware/getArea.action",data:"_format_=json&action="+e+"&areaId="+f,success:function(g){var i=null;if(g&&g.area){i=$.parseJSON(g.area);if(i){var h=c.areaBaesKey+e+"_"+f;M.localstorage.set(h,g.area);if(i.length>0){c.areaItemRender(e,i)}else{c.regionText=c.regionTextArr.join("");c.regionTextArr=[];c.itemValue.region=c.regionArr;c.regionArr=[];c.show(1)}}}},error:function(){}})},areahtml:function(k,j){var h=this;var f=[];var c=h.regionIndexObj[k];f.push('<ul id="area" class="sidebar-list bdr-bom" style="display: block;">');for(var e=0;e<j.length;e++){var l=j[e];var g="";if(h.tempRegion.length>=c+1&&h.tempRegion[c]==l.id){g="tick"}f.push('<li areaid="'+l.id+'" action="'+l.action+'" class="sidebar-iteam bdr-bom J_ping" report-eventparam="'+l.name+'" report-eventid="MListFilter_Address"><a href="javascript:void(0);"><i class="'+g+'"></i><span class="sort-of-brand">'+l.name+"</span></a></li>")}f.push(" </ul>");$("#"+h.itemPanelContainerId).empty();$("#"+h.itemPanelContainerId).append(f.join(""))},areaItembind:function(e){var c=this;$("#"+c.itemPanelContainerId).find("li").on("click",function(){var h=$(this).attr("areaid");var g=$(this).attr("action");var i=$(this).find("span").text();if(i&&h){var j=$(this).parent().attr("id");var f=c.regionIndexObj[j];c.tempRegion[f]=h;c.region.push(h);if(h==0){c.regionTextArr=[];c.regionArr=[];c.regionTextArr.push(i);c.regionArr.push(h)}else{c.regionTextArr.push(i);c.regionArr.push(h)}$(this).parent().children().find("i").removeClass("tick");$(this).find("i").addClass("tick");c.getAreaData(g,h)}})},areaItemRender:function(f,e){var c=this;c.areahtml(f,e);c.areaItembind(f)},submitBind:function(){var e=this;if(e.itemSubmitFuncObj&&e.itemSubmitFuncObj.func){var e=this;var c=e.itemSubmitFuncObj.source?e.itemSubmitFuncObj.source:null;e.itemSubmitFuncObj.func.call(c)}},itemDate:function(){var e=this;var c=e.itemPanelRootHtml();if($("#"+e.itemPanelContainerId)&&$("#"+e.itemPanelContainerId).length>0){$("#pannel").html(c)}else{$("#layout_content").after('<div class="mjd-popCover"><div id="pannel" class="mjd-floor choose-pannel">'+c+"</div></div>")}$("#pannel").removeClass("displayNone");$("#layout_head").removeClass("max-zindex")},brandItemBind:function(){var c=this;$("#"+c.subitemId).find("li").on("click",function(){var e=$(this).attr("m_key");if($(this).hasClass("checked")){$(this).removeClass("checked")}else{if(e=="price"){$(this).parent("ul").find("li").each(function(g){$(this).removeClass("checked")});$("#"+c.priceMinId).val("");$("#"+c.priceMaxId).val("")}else{var f=1;$(this).parent("ul").find("li").each(function(h,g){if($(g).hasClass("checked")){f++}});if(f>5){alert("最多选择5个哦~");return}}$(this).addClass("checked")}});$("#"+c.priceMinId).on("keyup",function(){$(this).parent("span").parent("li").parent("ul").find("li").each(function(e){$(this).removeClass("checked")})})},show:function(f){var e=this;e.itemDate();e.panelCreateRadioBind();e.itemRootBind();if(!f&&e.itemShowFuncObj&&e.itemShowFuncObj.func){var c=e.itemShowFuncObj.source?e.itemShowFuncObj.source:null;e.itemShowFuncObj.func.call(c)}},hide:function(){var e=this;e.reBeFore();if(e.itemHideFuncObj&&e.itemHideFuncObj.func){var c=e.itemHideFuncObj.source?e.itemHideFuncObj.source:null;e.itemHideFuncObj.func.call(c)}},setItemValue:function(c,f){var e=this;e.itemValue[c]=f},keepBeFore:function(){var e=this;for(key in e.itemValue){delete e.itemValue[key]}for(var c=0;c<e.searchRadioArray.length;c++){e.searchRadioArray[c].cancel()}e.show(1)},reBeFore:function(){var c=this}});a.clazz=b});M.define("searchItemPanelRadio",function(b){var a=function(e,c){this.init(e,c)};M.object.merge(a.prototype,{init:function(c,e){this.text=c.text?c.text:"";this.key=c.key?c.key:"";this.id=c.id?M.genId("searchItemPanelRadio"+c.id):M.genId("searchItemPanelRadio");this.baseId=c.id?c.id:null;this.reportEventid=c.reportEventid?c.reportEventid:"";this.isCheck=c.isCheck?true:false;this.itemValue=e},keepBefore:function(){var c=this;c.beforeIsCheck=c.isCheck},reBefore:function(){var c=this;if(c.isCheck!=c.beforeIsCheck){c.isCheck=c.beforeIsCheck;if(c.isCheck){$("#"+c.id).addClass("sel")}else{$("#"+c.id).removeClass("sel")}}},getValue:function(){var c=this;if(c.isCheck){return 1}else{return 0}},getKey:function(){var c=this;return c.key},getBaseId:function(){var c=this;return c.baseId},getId:function(){var c=this;return c.id},cancel:function(c){var e=this;e.secondChange=false;e.isCheck=false;if(c){$("#"+e.id).removeClass("sel")}},bind:function(c){var e=this;$("#"+e.id).on("click",function(){if(!e.isCheck){e.isCheck=true;$(this).addClass("sel");e.itemValue[e.key]=1}else{$(this).removeClass("sel");e.isCheck=false;e.itemValue[e.key]=0}if(c){c(e)}})},html:function(){var f=this;var e="";if(f.reportEventid){e="J_ping"}if(f.isCheck||(f.itemValue[f.key]&&f.itemValue[f.key]==1)){if(e){e=e+" sel"}else{e="sel"}}var c='<li class="unit-width"> <span style="" report-eventid="'+f.reportEventid+'" class="'+e+'" id="'+f.id+'" ><em></em><span>'+f.text+"</span></span></li>";return c}});b.clazz=a});M.define("searchList",function(b){var a=function(c){this.init(c)};M.object.merge(a.prototype,{init:function(i){this.sid=i.sid;this.isOrder=i.isOrder?i.isOrder:false;this.keyword=i.keyword?i.keyword:"";this.openPromotion=i.openPromotion?true:false;this.sirKey=i.sirKey?i.sirKey:"";this.loadDataUrl=i.loadDataUrl;this.cookieJda=M.cookie.getCookie("__jda")?M.cookie.getCookie("__jda"):null;if(this.cookieJda){this.cookieJda=this.cookieJda.split(".");if(this.cookieJda.length>=2){this.cookieJda=this.cookieJda[1]}else{this.cookieJda=""}}this.baseParams=i.baseParams;this.imgStaticSrc=i.imgStaticSrc;this.isFirst=true;this.baseId="searchlist";this.renderId=i.renderId;this.normalUlId=M.genId(this.baseId);this.bigimgUlId=M.genId(this.baseId);this.loadBoxId=M.genId(this.baseId);this.noMoreItemId=M.genId(this.baseId);this.noHasItemId=M.genId(this.baseId);this.pageNumId=M.genId(this.baseId);this.toTopId=M.genId(this.baseId);this.pageLoadIngId=M.genId(this.baseId);this.chongeImgViewId=M.genId(this.baseId);this.orderIdList=[];this.page=1;this.loadDateIng=false;this.noMoreDate=false;this.activityId=i.activityId;this.skuId=i.skuId;this.bigimgCount=0;this.channelname=M.url.getParam("channelName");try{this.searchAdvertisementListAbtest=parseInt(i.searchAdvertisementListAbtest,10)}catch(k){this.searchAdvertisementListAbtest=-1}try{this.abtestForUpToSaving=parseInt(i.abtestForUpToSaving,10)}catch(k){this.abtestForUpToSaving=100}var g=this.baseParams.split("&");if(g.length>0){var l=g[0].split("=");if(l.length>0&&l[0]=="categoryId"&&l[1]){this.categoryId=l[1]}}$("#"+this.renderId).append(this.pageLoadIngHtml());var o=false;if(i.data.newUserEgg){var m=new (M.exports("searchListNewUserEgg").clazz)();var j=m.html(i.data.newUserEgg);if(j!=""){o=true}$("#"+this.renderId).append(j)}if(i.data.activityInfo&&!o){var n=new (M.exports("searchListBanner").clazz)().html(i.data.activityInfo);$("#"+this.renderId).append(n)}if(i.data.shopInfo){i.data.shopInfo.isOrder=this.isOrder;i.data.shopInfo.noUseOldShop=i.noUseOldShop?true:false;var f=new (M.exports("searchListShop").clazz)().html(i.data.shopInfo);$("#"+this.renderId).append(f)}if(this.isOrder&&i.activityTip){var p=new (M.exports("searchListHaedCentent").clazz)(i);$("#"+this.renderId).append(p.html("以下商品参加:"+i.activityTip))}else{if(i.data.errorCorrection){var p=new (M.exports("searchListHaedCentent").clazz)(i);var h="为您显示<a>“"+i.data.errorCorrection+'”</a>相关的商品，仍然搜索<a class="J_ping" report-eventparam="" report-eventlevel="3" report-eventid="MList_ErrorCorrection" href="/ware/search.action?keyword='+this.keyword+'&isCorrect=1" style="text-decoration: none;">“'+this.keyword+"”</a>";$("#"+this.renderId).append(p.html(h))}}$("#"+this.renderId).append(this.normalUlHtml());if(!this.isOrder&&this.keyword){$("#"+this.renderId).append(this.bigimgUlHtml())}if(this.isOrder){var c=new (M.exports("searchOrderPannel").clazz)(i);this.orderContentId=c.getContentId();this.orderPannelRootId=c.getSearchOrderPannelRootId();$("#"+this.renderId).append(c.html());$("#layout_content").append('<div class="mjd-floor bar-space" ></div>')}this.searchToast=new (M.exports("searchToast").clazz)();$("#"+this.renderId).append(this.searchToast.html());$("#"+this.renderId).append(this.loadBoxHtml());$("#"+this.renderId).append(this.noMoreItemHtml());$("#"+this.renderId).append(this.noHasItemHtml());$("#"+this.renderId).append(this.pageNumHtml());$("#"+this.renderId).append(this.toTopHtml());if(!this.isOrder&&this.keyword){$("#"+this.renderId).append(this.chongeImgViewHtml())}this.imgLazyLad=new (M.exports("Imglazyload").clazz)({opacityIn:true});this.handleDate(i.data)},normalUlHtml:function(){var e=this;var c=[];c.push('<ul id="'+e.normalUlId+'" class="searchlist-normal">');c.push("</ul>");return c.join("")},bigimgUlHtml:function(){var e=this;var c=[];c.push('<ul id="'+e.bigimgUlId+'" class="searchlist-square-pic displayNone">');c.push("</ul>");return c.join("")},showPageNum:function(){var c=this;var f=null;if($("#"+c.normalUlId).hasClass("displayNone")){f=$("#"+c.bigimgUlId).find("li[page]")}else{f=$("#"+c.normalUlId).find("li[page]")}var k=null;var m=$(window).height();var e=$(window).scrollTop();for(var h=0,j=f.size();h<j;h++){var g=$(f[h]);var l=g.offset().top;if(l>=e&&l<(e+m)){k=g.attr("page")}}if(k){$("#"+c.pageNumId).find("span").text(k+"/"+c.allapge);$("#"+c.pageNumId).removeClass("displayNone")}},hidePageNum:function(){var c=this;$("#"+c.pageNumId).addClass("displayNone")},handleDate:function(D,s){var r=this;var f=r.page;var p=r.page+"";var l=D.wareList;var e=r.sid;var C=D.isFoot?D.isFoot:false;var u=D.gaiaContent?D.gaiaContent:false;var c="";var o=[];var x=false;e=e?e:"";if(D.showStyleRule){var m=D.showStyleRule.split("_");m=m[m.length-1];if(m=="longImg"){x=true}}if(x){$("#"+r.bigimgUlId).removeClass("searchlist-square-pic");$("#"+r.bigimgUlId).addClass("searchlist-long-pic")}if(r.page==1){r.allapge=parseInt(D.wareCount/10,10);r.allapge=(D.wareCount%10)>0?r.allapge+1:r.allapge}if(r.page<=r.allapge&&l&&l.length>0){for(var v=0,t=l.length;v<t;v++){if(l[v].targetUrl){o.push("AD"+l[v].wareId)}else{o.push("NA"+l[v].wareId)}l[v].isExtension=false;l[v].isExclusive=false;var q=null;var k=0;var A=null;if(l[v].toMURL){l[v].url=l[v].toMURL}else{if(l[v].international){var h="?sid="+e;l[v].url="//mitem.jd.hk/product/"+l[v].wareId+".html"+h}else{if(l[v].targetUrl){l[v].url=l[v].targetUrl;l[v].isExtension=true;if(l[v].exposalUrl){var E=new Image();E.src=r.isHttps?l[v].exposalUrl.replace("http://","https://"):l[v].exposalUrl}}else{if(l[v].eBookFlag){l[v].url="//e.m.jd.com/ebook/"+l[v].wareId+".html?sid="+e}else{l[v].url="//item.m.jd.com/product/"+l[v].wareId+".html?sid="+e}}}}if(l[v].promotionFlag&&l[v].promotionFlag.length>0){for(var y=0,n=l[v].promotionFlag.length;y<n;y++){if(l[v].promotionFlag[y]==100){l[v].isExclusive=true;break}}}l[v].isFoot=C;if(l[v].upToSaving){if(l[v].promotionFlag&&M.object.isArray(l[v].promotionFlag)){l[v].promotionFlag.push("-1")}else{l[v].promotionFlag=[];l[v].promotionFlag.push("-1")}}if(u){l[v].gaiaContent=u}}o=o.join(",");c=D.adEventId?D.adEventId:"";M.require("//wl.jd.com/unify.min.js",function(){try{var w=r.keyword+"_"+c+"_"+o;w=w+"_"+r.cookieJda;w=w+"_"+p;var i=new MPing.inputs.Click("MList_Product_Expose");i.event_param=w;i.page_param="";var g=new MPing();g.send(i)}catch(j){M.log(d,"error")}if(r.searchCategoryAbtest[l[v].cid2]&&!r.MList_Virtual_Expose){r.MList_Virtual_Expose=true;try{var i=new MPing.inputs.Click("MList_Virtual_Expose");i.event_param=r.showJdSelfBuyAbtest?"B":"A";i.page_param="";var g=new MPing();g.send(i)}catch(j){M.log(d,"error")}}});r.allapge=parseInt(D.wareCount/10,10);r.allapge=(D.wareCount%10)>0?r.allapge+1:r.allapge;if(r.isFirst&&x&&r.keyword){r.isFirst=false;$("#"+r.chongeImgViewId).removeClass("normal-change-btn");$("#"+r.chongeImgViewId).addClass("long-pic-btn");$("#"+r.bigimgUlId).removeClass("displayNone");$("#"+r.normalUlId).addClass("displayNone")}var B=r.normalLiHtml(D,f,c);var z=r.bigimgLiHtml(D,x,f,c);if(s){r.noMoreDate=false;$("#"+r.normalUlId).html(B);if(!r.isOrder&&r.keyword){$("#"+r.bigimgUlId).html(z)}}else{$("#"+r.normalUlId).append(B);if(!r.isOrder&&r.keyword){$("#"+r.bigimgUlId).append(z)}}r.orderBind();r.page++;r.imgLazyLad.lazyLad();if(r.page-1==r.allapge){r.noMoreDate=true;r.showNoMoreBox()}}else{if(f==1){$("#"+r.bigimgUlId).html("");$("#"+r.normalUlId).html("");r.showNoHasItemBox()}else{r.showNoMoreBox()}r.noMoreDate=true}},normalLiHtml:function(O,o,f){var z=this;var p=O.wareList;var u=[];var J={100:{index:3,text:"享"},5:{index:4,text:"赠"},1:{index:7,text:"降"},3:{index:6,text:"券"},4:{index:5,text:"豆"}};var q=z.getEndNumFromAbtest()<=this.abtestForUpToSaving;for(var E=0,D=p.length;E<D;E++){var F={};if(p[E].upToSaving){if(q){F={"-1":{index:1,text:"满减"}}}else{F={"-1":{index:1,text:p[E].upToSaving}}}M.object.merge(F,J)}else{F=J}var x=z.buriedPointHtml(f,p[E],E,false,q,o);u.push("<li page="+o+' class="normal-list">');u.push('    <a class="'+x+' href="'+p[E].url+'">');u.push('        <div class="pro-img">');u.push('            <img alt="'+p[E].wname+'" style="opacity: 0.3" imgsrc="'+p[E].imageurl.replace("/n4/","/n7/")+'" src="'+z.imgStaticSrc+'/images/search/thumb-avatar-170x170.png">');if(p[E].stockState&&p[E].stockState=="无货"){u.push('        <span class="new-nogoods"></span>')}if(p[E].isExtension&&!z.isOrder&&o==1&&E==0){u.push('            <img src="'+z.imgStaticSrc+'/images/search/hot-pic.png" class="hot-pic">')}if(p[E].eBookFlag){u.push('            <img src="'+z.imgStaticSrc+'/images/search/e-book.png" class="e-book-pic">')}if(p[E].preSale){u.push('<span class="red-pic-bottom">预约</span>')}else{if(p[E].isBooking){u.push('<span class="red-pic-bottom">预售</span>')}else{if(p[E].stockQuantity&&p[E].stockQuantity>0&&p[E].stockQuantity<10){u.push('<span class="black-pic-bottom">仅剩'+p[E].stockQuantity+"件</span>")}}}u.push("        </div>");u.push('    	   <div class="product-info-box">');if(!p[E].author){if(p[E].gaiaAttrt&&p[E].gaiaContent){u.push('		<div class="gaiya-phone">');u.push('			<div class="gaiya-name">');if(p[E].international){u.push("    		<i>全球购</i>")}else{if(p[E].samsTag&&(p[E].samsTag=="1"||p[E].samsTag=="2")){u.push('    		<i class="sam-f"></i>')}}u.push(" 			<span>"+p[E].wname+"</span>");u.push("			</div>");if(p[E].gaiaAttrt){var h=p[E].gaiaAttrt.split("｜");if(h.length>0){u.push('<span class="gaiya-icon">');for(var A=0;A<h.length;A++){u.push("<span>"+h[A]+"</span>")}u.push("</span>")}}u.push("</div>")}else{u.push('    	   <div class="product-name">');if(p[E].international){u.push("    		<i>全球购</i>")}else{if(p[E].samsTag&&(p[E].samsTag=="1"||p[E].samsTag=="2")){u.push('    		<i class="sam-f"></i>')}}u.push("        		<span>"+p[E].wname+"</span>");u.push("    		</div>")}}else{u.push('    		<div class="product-book-name">');u.push('         	<div class="book-name">');if(p[E].international){u.push("    		 	<i>全球购</i>")}u.push("             	<span>"+p[E].wname+"</span>");u.push("          	</div>");if(p[E].author){u.push('      	<span class="book-author">'+p[E].author+"</span>")}u.push("     	</div>")}u.push('<div class="gray-icon">');if(p[E].customAttrList&&p[E].customAttrList.length>0){for(var I=0;I<p[E].customAttrList.length;I++){u.push("<span>"+p[E].customAttrList[I]+"</span>")}}u.push("</div>");u.push('            <div class="product-price-m">');if(p[E].noPriceMsg){u.push('            <em>&yen;<span class="big-price">'+p[E].noPriceMsg.replace(/[&\|\\\*^\u00a5\-]/g,"")+"</span></em>")}else{if(p[E].jdPrice&&p[E].jdPrice>0){var C=p[E].jdPrice+"";if(M.string.isFloat(C)){C=C.split(".");u.push('            <em>&yen;<span class="big-price">'+C[0]+'</span><span class="small-price">.'+C[1]+"</span></em>")}else{u.push('            <em><span class="big-price">'+C+"</span></em>")}if(p[E].samsTag&&p[E].samsPrice&&(p[E].samsTag=="1"||p[E].samsTag=="2")){u.push('			   <span class="sam-price">&yen;'+p[E].samsPrice+"</span>");u.push('			   <i class="sam-p"></i>')}}else{u.push('            <em><span class="big-price">暂无报价</span></em>')}}var r='lowestbuy="1"';var l=new Array();if(p[E].lowestBuy&&p[E].lowestBuy>1){l.push({index:2,html:'<span class="little-icon yellow-icon">'+p[E].lowestBuy+"件起购</span>"});r='lowestbuy="'+p[E].lowestBuy+'"'}if(p[E].diffMobilePrice){l.push({index:3,html:'<span class="exclusive-price"><i></i><span>'+p[E].diffMobilePrice+"</span></span>"})}if(p[E].promotionFlag&&p[E].promotionFlag.length>0){for(var G=0,t=p[E].promotionFlag.length;G<t;G++){if(p[E].promotionFlag[G]==100){continue}if(F[p[E].promotionFlag[G]]){l.push({index:F[p[E].promotionFlag[G]].index,html:'<span class="little-icon">'+F[p[E].promotionFlag[G]].text+"</span>"})}}}l.sort(function(e,c){var i=e.index;var g=c.index;if(i<g){return -1}else{if(i==g){return 0}else{return 1}}});for(var B=0;B<l.length;B++){u.push(l[B].html)}u.push("            </div>");u.push('            <div class="gray-pro-info">');if(p[E].self){u.push('            <span class="self-sell">自营</span>')}if(p[E].totalCount){u.push("                <span>"+p[E].totalCount+"条评价</span>")}if(p[E].self&&(z.isOrder||p[E].isFoot)){}else{if(p[E].self&&p[E].isExtension&&!z.isOrder){}else{if(p[E].good&&p[E].good!="暂无评价"){u.push("                <span>好评"+p[E].good+"</span>")}else{u.push("                <span>暂无评价</span>")}}}var v=false;if(p[E].isExtension&&!z.isOrder){var n=z.getEndNumFromAbtest();var L='				<span class="new-adpush">推广</span>';if(n<=z.searchAdvertisementListAbtest){L='            	<span class="new-adpush">广告</span>'}v=true;u.push(L)}else{if(p[E].shopName&&!z.isOrder){u.push('                	<span class="book-shop-name">'+p[E].shopName+"</span>")}}u.push("            </div>");u.push("        </div>");if(p[E].stockState&&p[E].stockState=="无货"){u.push('		<span class="opcity-white"></span>')}else{u.push('     <span class="opcity-white displayNone"></span>')}u.push("    </a>");if(!p[E].stockState||(p[E].stockState&&p[E].stockState!="无货")){if(z.isOrder||p[E].isFoot){var y=M.genId(z.baseId);z.orderIdList.push(y);var s=z.isOrder?"MShopcart_AddtoCart":"MList_AddToCart";var K=" J_ping";if(v){K=K+" ad-car"}var N=z.isOrder?p[E].wareId:p[E].wareId+"_"+z.keyword+"_"+(z.channelname?z.channelname:"");u.push('    <span  m_ware_id="'+p[E].wareId+'" id="'+y+'" class="car-button'+K+'" '+r+' report-eventlevel="5" report-eventid="'+s+'"  report-eventparam="'+N+'" ></span>')}}if(z.openPromotion&&!z.isOrder&&!p[E].isFoot){if(p[E].mPromotionId&&p[E].promotionIconUrl){u.push('<img class="right-bottom-pic" src="'+p[E].promotionIconUrl.replace(/http:/g,"")+'">')}}u.push("</li>")}if(O.newHotTagMap&&O.newHotTagMap.length>0){u.push('<div class="recommend-lab">');u.push('<ul class="cf">');var P=M.url.getParam("tag");if(P){try{P=P.split(";")}catch(H){P=[]}}if(!M.object.isArray(P)){P=[]}for(var E=0;E<O.newHotTagMap.length;E++){var m="/ware/search.action?keyword="+z.keyword+"&tag="+P.concat([O.newHotTagMap[E].tagvalue]).join(";");u.push('<li class="J_ping" report-eventparam="" report-eventlevel="3" report-eventid="MList_Label" onclick="location.href=$(this).find(\'a\').attr(\'href\');return">');u.push('<a href="'+m+'">');u.push(O.newHotTagMap[E].tagname);u.push("</a>");u.push("</li>")}u.push("</ul>");u.push("</div>")}return u.join("")},bigimgLiHtml:function(I,B,n,f){var u=this;var o=I.wareList;var r=[];var G={100:{index:3,text:"享"},5:{index:4,text:"赠"},1:{index:7,text:"降"},3:{index:6,text:"券"},4:{index:5,text:"豆"}};var D=document.documentElement.clientWidth||document.body.clientWidth;var s;if(B){s=(D-2)/2/0.78}else{s=(D-2)/2}var p=u.getEndNumFromAbtest()<=this.abtestForUpToSaving;for(var z=0,y=o.length;z<y;z++,u.bigimgCount++){var A={};if(o[z].upToSaving){if(p){A={"-1":{index:1,text:"满减"}}}else{A={"-1":{index:1,text:o[z].upToSaving}}}M.object.merge(A,G)}else{A=G}var t=u.buriedPointHtml(f,o[z],z,true,p,n);r.push("<li page="+n+' class="big-pic-list">');r.push('    <a class="card-border'+t+' href="'+o[z].url+'">');if(o[z].stockState&&o[z].stockState=="无货"){r.push('    <div class="no-pro"></div>')}r.push("        <!-- 用js根据下面这个div的宽算出高并赋值height=width -->");r.push('        <div class="square-pic-list-div">');var K=o[z].longImgUrl;if(B){K=o[z].longImgUrl.replace("/n4/","/n8/");longimg="/images/search/longimgNone.png"}else{K=o[z].imageurl.replace("/n4/","/n7/");longimg="/images/search/bigimgNone.png"}r.push('            <img alt="'+o[z].wname+'" width="100%" style="height:'+s+'px;opacity: 0.3"  src="'+u.imgStaticSrc+longimg+'" imgsrc="'+K+'">');if(o[z].isExtension&&!u.isOrder){var m=u.getEndNumFromAbtest();var H='				<span class="new-adpush">推广</span>';if(m<=u.searchAdvertisementListAbtest){H='            	<span class="new-adpush">广告</span>'}r.push(H)}if(o[z].eBookFlag){r.push('            <img src="'+u.imgStaticSrc+'/images/search/e-book.png" class="e-book-pic">')}if(o[z].stockState&&o[z].stockState=="无货"){r.push('        <img src="'+u.imgStaticSrc+'/images/search/big-no-goods.png" class="bigpic-no-goods-fangtu">')}if(o[z].preSale){r.push('<span class="red-pic-bottom">预约</span>')}else{if(o[z].isBooking){r.push('<span class="red-pic-bottom">预售</span>')}else{if(o[z].stockQuantity&&o[z].stockQuantity>0&&o[z].stockQuantity<10){r.push('<span class="black-pic-bottom">仅剩'+o[z].stockQuantity+"件</span>")}}}if(!u.isOrder&&!o[z].isFoot){if(o[z].mPromotionId&&o[z].promotionIconUrl){r.push('<img class="right-bottom-pic" src="'+o[z].promotionIconUrl.replace(/http:/g,"")+'">')}}r.push("        </div>");r.push('        <div class="product-content-box">');r.push('            <div class="square-pic-list-name">');if(o[z].international){r.push('             <i class="global-buy-label">全球购</i>')}else{if(o[z].samsTag&&(o[z].samsTag=="1"||o[z].samsTag=="2")){r.push('    		<i class="sam-f"></i>')}}r.push("					<span>"+o[z].wname+"</span>");r.push("            </div>");r.push('       <div class="price-auther-sam">');if(!o[z].samsTag){r.push('				<div class="product-book-author-big">');if(o[z].author){r.push((o[z].author?o[z].author:""))}else{if(o[z].customAttrList&&o[z].customAttrList.length>0){for(var F=0;F<o[z].customAttrList.length;F++){r.push('<span class="gray-icon">'+o[z].customAttrList[F]+"</span>")}}}r.push("				</div>")}r.push('            	<div class="square-pic-list-price">');if(o[z].noPriceMsg){r.push('            <span class="product-price1">&yen;<span class="big-price">'+o[z].noPriceMsg.replace(/[&\|\\\*^\u00a5\-]/g,"")+"</span></span>")}else{if(o[z].jdPrice&&o[z].jdPrice>0){var x=o[z].jdPrice+"";if(M.string.isFloat(x)){x=x.split(".");r.push('            <span class="product-price1">&yen;<span class="big-price">'+x[0]+'</span><span class="small-price">.'+x[1]+"</span></span>")}else{r.push('            <span class="product-price1"><span class="big-price">'+x+"</span></span>")}}else{r.push('            <span class="product-price1"><span class="big-price">暂无报价</span></span>')}}var h=new Array();if(o[z].lowestBuy&&o[z].lowestBuy>1){h.push({index:2,html:'<span class="little-icon yellow-icon">'+o[z].lowestBuy+"件起购</span>"})}if(o[z].diffMobilePrice){h.push({index:3,html:'<span class="vip-changem"><img src="'+u.imgStaticSrc+'/images/search/icon-save-radius.png" class="icon-save-big"></span>'})}if(o[z].promotionFlag&&o[z].promotionFlag.length>0){for(var C=0,q=o[z].promotionFlag.length;C<q;C++){if(o[z].promotionFlag[C]==100){continue}if(A[o[z].promotionFlag[C]]){h.push({index:A[o[z].promotionFlag[C]].index,html:'<span class="little-icon">'+A[o[z].promotionFlag[C]].text+"</span>"})}}}h.sort(function(e,c){var i=e.index;var g=c.index;if(i<g){return -1}else{if(i==g){return 0}else{return 1}}});for(var v=0;v<h.length;v++){r.push(h[v].html)}r.push("            </div>");if(o[z].samsTag&&o[z].samsPrice&&(o[z].samsTag=="1"||o[z].samsTag=="2")){r.push('            <div class="sam-price-s">');r.push("			       <span>&yen;"+o[z].samsPrice+"</span>");r.push("			       <i></i>");r.push("            </div>")}r.push("       </div>");r.push('            <div class="evaluate-self">');if(o[z].self){r.push('            <span class="jd-self-support">自营</span>')}if(o[z].totalCount){r.push('                <span class="evaluate">'+o[z].totalCount+"条评价</span>")}else{r.push('                <span class="evaluate">暂无评价</span>')}r.push("            </div>");r.push("        </div>");r.push("    </a>");r.push("</li>");if(u.bigimgCount!=0&&(u.bigimgCount+1)%10==0){if(I.newHotTagMap&&I.newHotTagMap.length>0){r.push('<div class="recommend-lab">');r.push('<ul class="cf">');var J=M.url.getParam("tag");if(J){try{J=J.split(";")}catch(E){J=[]}}if(!M.object.isArray(J)){J=[]}for(var z=0;z<I.newHotTagMap.length;z++){var l="/ware/search.action?keyword="+u.keyword+"&tag="+J.concat([I.newHotTagMap[z].tagvalue]).join(";");r.push('<li class="J_ping" report-eventparam="" report-eventlevel="3" report-eventid="MList_Label" onclick="location.href=$(this).find(\'a\').attr(\'href\');return">');r.push('<a href="'+l+'">');r.push(I.newHotTagMap[z].tagname);r.push("</a>");r.push("</li>")}r.push("</ul>");r.push("</div>");r.push("<div></div>")}}}return r.join("")},getEndNumFromAbtest:function(){var f=this;if(!f.cookieabtest){f.cookieabtest=M.cookie.getCookie("abtest");if(f.cookieabtest&&f.cookieabtest.length>0){var c=f.cookieabtest.split("_");if(c.length>1){f.cookieabtest=c[1];if(f.cookieabtest.length>=1){try{f.cookieabtest=parseInt(f.cookieabtest,10)}catch(g){f.cookieabtest=1000}}}}}return f.cookieabtest},buriedPointHtml:function(m,p,j,e,n,k){var c=this;var i="";if(c.isOrder){var h="";var g=e?1:0;if(c.categoryId){h=c.categoryId+"_"+g}else{h=c.keyword+"_"+g}i=' J_ping" report-eventid="MShopcart_Present"  report-eventparam="'+p.wareId+"_"+h+'" '}else{var o=[];var f="";if(c.categoryId){o.push(0);f=""}else{o.push(1);f=c.keyword}o.push(p.cid1);o.push(p.cid2);o.push(p.catid);o.push(p.wareId);o.push(f);var l=p.mPromotionId?p.mPromotionId:"";o.push(l);if(p.international){o.push(1)}else{o.push(0)}if(p.self){o.push(1)}else{o.push(0)}if(e){o.push(1)}else{o.push(0)}o.push(k);if(p.preSale){o.push(1)}else{if(p.isBooking){o.push(2)}else{o.push("")}}if(p.samsTag){if(p.samsTag=="1"&&p.samsPrice){o.push(1)}else{if(p.samsTag=="2"){o.push(2)}else{o.push("")}}}else{o.push("")}if(c.channelname){o.push(c.channelname)}else{o.push("")}if(n){o.push("b")}else{o.push("a")}if(p.gaiaContent&&p.gaiaAttrt){o.push(1)}else{o.push(2)}o.push("##");o.push(f);o.push(m);if(p.targetUrl){o.push("AD"+p.wareId)}else{o.push("NA"+p.wareId)}if(c.cookieJda){o.push(c.cookieJda)}i=' J_ping" report-eventid="MList_Product"  report-eventparam="'+o.join("_")+'" '}return i},pageLoadIngHtml:function(){var e=this;var c=[];c.push('<div id="'+e.pageLoadIngId+'" class="is-loading displayNone"><em></em></div>');return c.join("")},loadBoxHtml:function(){var e=this;var c=[];c.push('<div id="'+e.loadBoxId+'" class="loading-box displayNone">');c.push('<span class="loading-pic"></span>');c.push('<span class="loading-text">加载中...</span>');c.push("</div>");return c.join("")},noMoreItemHtml:function(){var c=this;return'<div id="'+c.noMoreItemId+'" class="no-more-product displayNone"></div>'},noHasItemHtml:function(){var c=this;return'<div id="'+c.noHasItemId+'" class="no-right-product displayNone"></div>'},pageNumHtml:function(){var c=this;return'<div id="'+c.pageNumId+'" class="page-num displayNone"><span>0/0</span></div>'},toTopHtml:function(){var c=this;var e=c.isOrder?'report-eventid="MShopcartsale_Search" report-eventparam="" class="J_ping go-back-to-top displayNone"':'class="go-back-to-top displayNone"';return'<span id="'+c.toTopId+'" '+e+"></span>"},chongeImgViewHtml:function(){var c=this;return'<span id="'+c.chongeImgViewId+'" class="normal-change-btn"></span>'},chongeWareView:function(){var e=this;var c=$("#"+e.chongeImgViewId);if(e.keyword){if($(c).hasClass("normal-change-btn")){$(c).removeClass("normal-change-btn");$(c).addClass("long-pic-btn");$("#"+e.bigimgUlId).removeClass("displayNone");$("#"+e.normalUlId).addClass("displayNone")}else{$(c).removeClass("long-pic-btn");$(c).addClass("normal-change-btn");$("#"+e.normalUlId).removeClass("displayNone");$("#"+e.bigimgUlId).addClass("displayNone")}e.imgLazyLad.lazyLad()}},orderBind:function(){var c=this;if(c.orderIdList.length>0){for(;c.orderIdList.length>0;){var e=c.orderIdList.pop();$("#"+e).on("click",function(){var h=$(this).attr("m_ware_id");var g=$(this).attr("lowestbuy");try{g=parseInt(g,10)}catch(i){g=1}var j=M.cookie.getCookie("USER_FLAG_CHECK");var f=c.sid;M.http.ajax({url:"//p.m.jd.com/cart/add.json",data:"wareId="+h+"&num="+g+"&USER_FLAG_CHECK="+j+"&sid="+f,success:function(k){c.loadOrderContent();if(g>1){c.searchToast.show("succee-icon","该商品最低需购买"+g+"件，已为您加入购物车")}else{c.searchToast.show("succee-icon","添加成功")}},error:function(){c.searchToast.show("error-icon","添加失败")}})})}}},loadOrderContent:function(){var e=this;if(e.isOrder){var f=M.cookie.getCookie("USER_FLAG_CHECK");var c=e.sid;M.http.ajax({url:"//p.m.jd.com/cart/getCartPromotionAmount.json",data:"promotionId="+e.activityId+"&num=1&USER_FLAG_CHECK="+f+"&sid="+c,success:function(g){if(g&&g.cartExt&&g.cartExt.result&&g.cartExt.result.promotionTotalT){var h=g.cartExt.result.promotionTotalT.replace("\n","</br>");$("#"+e.orderContentId).html(h);if(g.cartExt.result.totalPrice&&g.cartExt.result.totalPrice>0){$("#"+e.orderPannelRootId).removeClass("displayNone")}}},error:function(){}})}},showToTop:function(){var c=this;$("#"+c.toTopId).removeClass("displayNone")},hideToTop:function(){var c=this;$("#"+c.toTopId).addClass("displayNone")},showNoHasItemBox:function(){var c=this;$("#"+c.noHasItemId).removeClass("displayNone")},hideNoHasItemBox:function(){var c=this;$("#"+c.noHasItemId).addClass("displayNone")},showNoMoreBox:function(){var c=this;$("#"+c.noMoreItemId).removeClass("displayNone")},hideNoMoreBox:function(){var c=this;$("#"+c.noMoreItemId).addClass("displayNone")},showLoadBox:function(){var c=this;$("#"+c.loadBoxId).removeClass("displayNone")},hideLoadBox:function(){var c=this;$("#"+c.loadBoxId).addClass("displayNone")},showPageLoadIngIdBox:function(){var c=this;$("#"+c.pageLoadIngId).removeClass("displayNone")},hidePageLoadIngIdBox:function(){var c=this;$("#"+c.pageLoadIngId).addClass("displayNone")},toLoadDate:function(i){var g=this;var c=0;g.imgLazyLad.lazyLad();var h=$(window).scrollTop();var e=$(window).height();var f=0;if(!$("#"+g.normalUlId).hasClass("displayNone")){c=$("#"+g.normalUlId).height();f=120*3}else{c=$("#"+g.bigimgUlId).height();f=455*2}if((h+f+e)>=c&&!g.noMoreDate){g.load(i)}},reload:function(f,c){var e=this;e.page=1;e.load(f,true,c)},load:function(h,e,c){var f=this;if(!f.loadDateIng){f.loadDateIng=true;if(e){f.showPageLoadIngIdBox()}else{f.showLoadBox()}var g=h?h:"";g=g.replace(/\'/g,'"');f.hideNoHasItemBox();f.hideNoMoreBox();M.http.ajax({url:f.loadDataUrl,data:"_format_=json&"+g+"&page="+f.page+"&"+f.baseParams.replace(/&nbsp;/g," "),success:function(i){var j=null;if(i&&i.value){j=$.parseJSON(i.value);f.handleDate(j.wareList,e);c&&c.call()}if(e){f.hidePageLoadIngIdBox()}else{f.hideLoadBox()}setTimeout(function(){f.loadDateIng=false},20)},error:function(){f.hideLoadBox();if(e){f.hidePageLoadIngIdBox()}else{f.hideLoadBox()}if(f.page==1){$("#"+f.bigimgUlId).html("");$("#"+f.normalUlId).html("");f.showNoHasItemBox()}else{f.showNoMoreBox()}setTimeout(function(){f.loadDateIng=false},20)}})}},bind:function(){var c=this;$("#"+c.chongeImgViewId).on("click",function(){c.chongeWareView()});$("#"+c.toTopId).on("click",function(){window.scrollTo(0,0)});if(c.isOrder){$("#layout_search_submit").on("click",function(){if($.trim($("#layout_newkeyword").val())){$("#layout_searchForm").submit()}})}},render:function(){var c=this;c.bind();c.loadOrderContent()}});b.clazz=a});M.define("searchListBanner",function(a){var b=function(){};M.object.merge(b.prototype,{html:function(c){var g=this;var f=[];if(c.actionUrl.indexOf("//sale.jd.com")>0){if(c&&c.actionUrl&&c.imgUrl){var e=c.imgUrl.replace("/n4/","/n12/").replace(/http:/g,"");f.push('<div class="banner-pic">');f.push('<a class="J_ping" report-eventlevel="3" report-eventparam="1" report-eventid="MSearch_Banner" style="text-decoration: none;" href='+c.actionUrl.replace("/app/","/m/")+">");f.push('<img src="'+e+'">');f.push("</a>");f.push("</div>")}}return f.join("")}});a.clazz=b});M.define("searchListHaedCentent",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(c){this.isOrder=c&&c.isOrder?true:false},html:function(e){var f=this;var c=[];if(f.isOrder){c.push('<div class="search-minder2-div">');c.push('	<span class="search-minder2">');c.push(e);c.push("</span>");c.push("</div>")}else{c.push('<div class="search-minder">');c.push(e);c.push("</div>")}return c.join("")}});a.clazz=b});M.define("searchListNewUserEgg",function(a){var b=function(){this.init()};M.object.merge(b.prototype,{init:function(){this.eggsAcitivityId=M.genId("searchListNewUserEgg")},html:function(i){var h=this;var g=[];var f=M.cookie.getCookie("so_newUserEgg");if(f){try{f=parseInt(f,10)}catch(j){f=0}}else{f=0}if(i&&i.localNum&&i.banUrl&&i.linkUrl&&i.localNum>f){var c=i.banUrl.replace(/http:/g,"");g.push('<div class="banner-pic">');g.push('<a id="'+h.eggsAcitivityId+'"  class="J_ping" report-eventlevel="3" report-eventparam="2" report-eventid="MSearch_Banner" style="text-decoration: none;" href="'+i.linkUrl+'">');g.push('<img src="'+c+'">');g.push("</a>");g.push("</div>");f++;M.cookie.setCookie("so_newUserEgg",f,30,"/","so.m.jd.com")}else{if(i&&i.banUrl&&i.linkUrl){M.cookie.setCookie("so_newUserEgg",i.localNum,30,"/","so.m.jd.com")}}return g.join("")}});a.clazz=b});M.define("searchListShop",function(a){var b=function(){};M.object.merge(b.prototype,{html:function(g){var i=this;var f=[];if(g&&g.shopId&&g.shopName){var k=g.isOrder?'report-eventlevel="3" report-eventparam="'+g.shopId+'" report-eventid="MShopcartsale_Shopnews"':' report-eventparam="'+g.shopId+'" report-eventid="MList_ShopEnter"';var c="http://ok.jd.com/m/index-"+g.shopId+"v";if(g.noUseOldShop){c="http://shop.m.jd.com/?shopId="+g.shopId}if(!g.imgPath){f.push('<div class="shop-recommend">');f.push('<a href="'+c+'" class="J_ping" '+k+" >");f.push('<div class="shop-pic">');if(g.logoUrl){f.push('<img src="'+g.logoUrl.replace(/http:/g,"")+'">')}f.push("</div>");f.push('<div class="shop-content">');f.push("<span>"+g.shopName+"</span>");if(g.score){f.push("<span>综合评分<i>"+g.score+"</i></span>")}if(g.followCount){f.push("<span>"+g.followCount+"人关注</span>")}f.push("</div>");f.push('<div class="shop-right-arrow"></div>');f.push("</a>");f.push("</div>")}else{f.push('<div class="shop-recommend-new">');f.push('    <a href="'+c+'" class="J_ping" '+k+" >");f.push('        <div class="small-pic-shop cf">');f.push('            <div class="shop-pic">');if(g.logoUrl){f.push('            <img src="'+g.logoUrl.replace(/http:/g,"")+'">')}f.push("            </div>");if(g.venderType&&g.venderType=="1"){f.push('            <div class="shop-text"><span class="jd-self">'+g.shopName+"</span></div>")}else{if(g.diamond&&g.diamond==true){f.push('            <div class="shop-text"><span class="diamond">'+g.shopName+"</span></div>")}else{f.push('            <div class="shop-text"><span class="normal">'+g.shopName+"</span></div>")}}f.push("        </div>");f.push('        <div class="big-pic-shop">');f.push('            <img src="'+g.imgPath.replace(/http:/g,"")+'">');f.push('            <div class="big-shop-content">');if(g.followCount){var h=0;try{h=g.followCount>=10000?g.followCount/10000:g.followCount;h=parseInt(h,10);if(g.followCount>=10000){h=h+"万"}}catch(j){h=0}if(h){f.push('            <span class="title">'+h+"人关注</span>")}}if(g.desc){f.push('            <span class="info">'+g.desc+"</span>")}f.push('                <div class="icon">');if(g.hasNewWare){f.push('                <i class="yellow-i">上新</i>')}if(g.hasPromotion){f.push('                <i class="red-i">促销</i>')}if(g.hasCoupon){f.push('                <i class="blue-i">券</i>')}f.push("                </div>");f.push("            </div>");f.push('            <i class="right-arrow"></i>');f.push("        </div>");f.push("    </a>");f.push("</div>")}}return f.join("")}});a.clazz=b});M.define("searchOrderPannel",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(c){this.contentId=M.genId("searchOrderPannel");this.searchOrderPannelRootId=M.genId("searchOrderPannel");this.searchOrderPannelShow=c&&c.searchOrderPannelShow?true:false},html:function(){var f=this;var e=[];var c=f.searchOrderPannelShow?"":"displayNone";e.push('<div id="'+f.searchOrderPannelRootId+'" class="mjd-floor bar-pannel '+c+'">');e.push('<div class="bottom-price-info">');e.push("<div>");e.push('<span id="'+f.contentId+'" ></span>');e.push('<a class="J_ping" report-eventid="MShopcartsale_ToShopCart" report-eventparam="" href="//p.m.jd.com/cart/cart.action">返回购物车</a>');e.push("</div>");e.push("</div>");e.push("</div>");return e.join("")},getContentId:function(){var c=this;return c.contentId},getSearchOrderPannelRootId:function(){var c=this;return c.searchOrderPannelRootId}});a.clazz=b});M.define("searchSort",function(a){var b=function(e,c){this.init(e,c)};M.object.merge(b.prototype,{init:function(e,c){this.ItemValue=c?c:{};this.moreSortValMap={"5":"新品","6":"评价"};this.baseId="searchSort";this.isOrder=e.isOrder?true:false;this.moreSortId=M.genId(this.baseId);this.salesId=M.genId(this.baseId);this.prcieId=M.genId(this.baseId);this.comprehensiveId=M.genId(this.baseId);this.newItemId=M.genId(this.baseId);this.evaluateId=M.genId(this.baseId);this.moreSortPanelId=M.genId(this.baseId);this.moreOptionId=M.genId(this.baseId);this.sortPanelId=M.genId(this.baseId);this.sortIdObj={sales:{id:this.salesId,inMore:false,hasCorner:false,isSort:true,openMoreSort:false,val:["1"]},prcie:{id:this.prcieId,inMore:false,hasCorner:true,isSort:true,openMoreSort:false,val:["2","3"]},comprehensive:{id:this.comprehensiveId,inMore:true,isSort:true,openMoreSort:false,val:[""]},newItem:{id:this.newItemId,inMore:true,hasCorner:false,isSort:true,openMoreSort:false,val:["5"]},evaluate:{id:this.evaluateId,inMore:true,hasCorner:false,isSort:true,openMoreSort:false,val:["6"]},moreOption:{id:this.moreOptionId,inMore:false,hasCorner:false,isSort:false,openMoreSort:false,isOpenMoreOption:true},moreSort:{id:this.moreSortId,inMore:false,hasCorner:false,isSort:false,openMoreSort:true}};this.sortIdFuncObj={moreSort:e.moreSort?e.moreSort:null,sales:e.sales?e.sales:null,prcie:e.prcie?e.prcie:null,comprehensive:e.comprehensive?e.comprehensive:null,newItem:e.newItem?e.newItem:null,evaluate:e.evaluate?e.evaluate:null,moreOption:e.moreOption?e.moreOption:null}},searchSortHtml:function(){var c=this;var h=[];var i=c.isOrder?"MShopcartsale_All":"MList_Comprehensive";var l=c.isOrder?"MShopcartsale_Total":"MList_SalesVolume";var e=c.isOrder?"MShopcartsale_Price":"MList_Price";var j=c.isOrder?"MShopcartsale_Select":"MList_Filter";var f=c.ItemValue.sort?c.ItemValue.sort:"";var g=c.moreSortValMap[f]?c.moreSortValMap[f]:"综合";h.push('<ul id="'+c.sortPanelId+'" class="new-search-tab bdr-bom">');h.push('<li report-eventparam="" report-eventid="'+i+'" submenu="moreSort" class="J_ping new-change-eleven new-sort-integrative '+(!f||f=="5"||f=="6"?"active":"")+' " id="'+c.moreSortId+'"><span>'+g+"</span></li>");h.push('<li submenu="sales" class="new-change-eleven '+(f=="1"?"active":"")+'" id="'+c.salesId+'"><span report-eventid="'+l+'" report-eventparam=""  class="J_ping">销量</span></li>');var k="";if(f=="2"){k="arrow-up"}else{if(f=="3"){k="arrow-down"}}h.push('<li submenu="prcie" class="new-change-eleven new-sort-price '+(f=="2"||f=="3"?"active":"")+'" id="'+c.prcieId+'"><span report-eventid="'+e+'" report-eventparam=""  class="J_ping '+k+'">价格</span></li>');h.push('<li submenu="moreOption" class="new-change-eleven" id="'+c.moreOptionId+'"><span report-eventid="'+j+'" report-eventparam="" class="J_ping">筛选<span class="choose-icon"></span></span></li>');h.push("</ul>");return h.join("")},searchMoreSortHtml:function(){var e=this;var c=[];var f=e.ItemValue.sort?e.ItemValue.sort:"";c.push('<div id="'+e.moreSortPanelId+'" class="integrative-box show-position displayNone">');c.push('<ul class="integrative-list">');c.push('<li submenu="comprehensive" id="'+e.comprehensiveId+'" class="sidebar-iteam '+(!f?"checked":"")+'" report-eventparam="" report-eventid="MList_Comprehensive"><span><i class="tick"></i><span class="sort-of-brand">综合</span></span></li>');c.push('<li submenu="newItem" id="'+e.newItemId+'" class="sidebar-iteam '+(f=="5"?"checked":"")+'" report-eventparam="" report-eventid="MList_NewProducts"><span><i class="tick"></i><span class="sort-of-brand">新品</span></span></li>');c.push('<li submenu="evaluate" id="'+e.evaluateId+'" class="sidebar-iteam '+(f=="6"?"checked":"")+'" report-eventparam="" report-eventid="MList_CommentsNum"><span><i class="tick"></i><span class="sort-of-brand">评价</span></span></li>');c.push("</ul>");c.push("</div>");return c.join("")},bind:function(){var e=this;for(key in e.sortIdObj){var c=e.sortIdObj[key];$("#"+c.id).on("click",function(){M.log(new Date().getTime(),"error");e.eventFunc(this)})}},eventFunc:function(i){var h=this;var f=$(i).attr("submenu");var g=h.sortIdObj[f];var k="";if(g.inMore){var j=$(i).find("span").find("span").text();$("#"+h.moreSortId).find("span").text(j);$("#"+h.sortPanelId).find("li").removeClass("active");$("#"+h.moreSortPanelId).find("li").removeClass("checked");$(i).addClass("checked");$("#"+h.moreSortId).addClass("active");$("#"+h.moreSortPanelId).addClass("displayNone")}else{if(!g.openMoreSort&&!g.isOpenMoreOption){$("#"+h.sortPanelId).find("li").removeClass("active");$(i).addClass("active");$("#"+h.moreSortPanelId).find("li").removeClass("checked");$("#"+h.moreSortPanelId).addClass("displayNone")}}if(g.hasCorner){if($(i).children().hasClass("arrow-down")){$(i).children().removeClass("arrow-down");$(i).children().addClass("arrow-up");if(g.val){k=g.val[0]}}else{$(i).children().removeClass("arrow-up");$(i).children().addClass("arrow-down");if(g.val){k=g.val[1]}}}else{if(g.isSort){$("#"+h.prcieId).children().removeClass("arrow-down");$("#"+h.prcieId).children().removeClass("arrow-up")}if(g.val){k=g.val[0]}}if(!g.isSort){k=""}if(g.openMoreSort){if($("#"+h.moreSortPanelId).hasClass("displayNone")){$("#"+h.moreSortPanelId).removeClass("displayNone")}else{$("#"+h.moreSortPanelId).addClass("displayNone")}}if(g.isOpenMoreOption){$("#"+h.moreSortPanelId).addClass("displayNone")}h.ItemValue.sort=k;var c=h.sortIdFuncObj[f];if(c&&c.func){var e=c.source?c.source:null;c.func.call(e,k)}M.log(new Date().getTime(),"error")},getPanelId:function(){var c=this;return c.sortPanelId},moreSortPanelShow:function(){var c=this;if($("#"+c.moreSortPanelId).hasClass("displayNone")){return false}else{return true}},getMoreSortPanelId:function(){var c=this;return c.moreSortPanelId},claerSort:function(){var c=this;$("#"+c.moreSortId).find("span").text("综合");$("#"+c.sortPanelId).find("li").removeClass("active");$("#"+c.moreSortPanelId).find("li").removeClass("checked");$("#"+c.moreSortPanelId).find("li").eq(0).addClass("checked");$("#"+c.moreSortId).addClass("active");c.ItemValue.sort=""}});a.clazz=b});M.define("searchToast",function(a){var b=function(){this.init()};M.object.merge(b.prototype,{init:function(){this.rootId=M.genId("searchToast");this.clsId=M.genId("searchToast");this.messageId=M.genId("searchToast");this.beforeClazz=null},html:function(){var e=this;var c=[];c.push('<div id="'+e.rootId+'" style="display: none;"  class="mjdToastContainer">');c.push('<div class="pop-floor">');c.push('<div class="message-box content-box">');c.push('<div class="message-box-icon"><i id="'+e.clsId+'" class="message-icon"></i></div>');c.push('<div id="'+e.messageId+'" class="message-box-content txt-align"></div>');c.push("</div>");c.push("</div>");c.push("</div>");return c.join("")},show:function(e,g){var h=this;if(h.beforeClazz){$("#"+h.clsId).removeClass(h.beforeClazz)}if(e){h.beforeClazz=e;$("#"+h.clsId).addClass(e)}var c=$("#"+h.rootId)[0];var i=$("body").find(".content-box");if(c.width>0){i.css("width",c.width)}else{c.width=i.css("width").replace("px","")}if(c.height<=0){c.height=i.css("height").replace("px","")}var f=$("body").find(".txt-align");f.css("text-align",c.textAlign);i.css("marginLeft",-c.width/2);i.css("marginTop",-c.height/2);i.removeClass("hidden");if(g){$("#"+h.messageId).text(g)}$("#"+h.rootId).fadeIn(200,function(){setTimeout(function(){$("#"+h.rootId).fadeOut(200)},1000)})}});a.clazz=b});M.define("Imglazyload",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(c){this.scrollId=c&&c.scrollId?c.scrollId:"";this.opacityIn=c&&c.opacityIn?true:false;this.baseId="Imglazyload"},lazyLad:function(){var e=this;var c=$(window).height();var k=$("img[imgsrc]");var g=$(window).scrollTop();for(var j=0,l=k.size();j<l;j++){currentObj=$(k[j]);var m=currentObj.offset().top-c-200;if(parseInt(g)>=parseInt(m)){var f=M.genId(this.baseId);currentObj.attr("id",f);if(e.opacityIn){currentObj.css({opacity:"0.3"});var h=new Image();h.id=f;h.src=currentObj.attr("imgsrc").replace(/http:/g,"");h.onload=function(){$("#"+this.id).attr("src",this.src);$("#"+this.id).removeAttr("imgsrc");$("#"+this.id).css({opacity:"1","-webkit-transition":"opacity 0.5s ease-in",transition:"opacity 0.5s ease-in"})};h.onerror=function(){$("#"+this.id).removeAttr("imgsrc")}}else{currentObj.attr("src",currentObj.attr("imgsrc").replace(/http:/g,""));currentObj.removeAttr("imgsrc")}}}}});a.clazz=b});M.define("remoteStorage",function(b){var a=function(c,e){this.init(c,e)};M.object.merge(a.prototype,{init:function(c,f){this.op={WRITE:"W",READ:"R",DEL:"D",CLEAR:"X"};this.origin=c;this.path=f;this._iframe=null;this._iframeReady=false;this._queue=[];this._requests={};this._id=0;if(!this._iframe){var e=this;if(window.postMessage&&window.JSON&&window.localStorage){this._iframe=document.createElement("iframe");this._iframe.style.cssText="position:absolute;width:1px;height:1px;left:-9999px;";this._iframe.src=this.origin+this.path;document.body.appendChild(this._iframe);if(window.addEventListener){this._iframe.addEventListener("load",function(){e._iframeLoaded()},false);window.addEventListener("message",function(g){e._handleMessage(g)},false)}else{if(this._iframe.attachEvent){this._iframe.attachEvent("onload",function(){e._iframeLoaded()},false);window.attachEvent("onmessage",function(g){e._handleMessage(g)})}}}else{throw new Error("Unsupported browser.")}}},get:function(c,g){var e=this;var f=null;e._toSend({op:e.op.READ,key:c},g);return f},set:function(c,f,g){var e=this;e._toSend({key:c,op:e.op.WRITE,value:f},g)},remove:function(c,f){var e=this;e._toSend({key:c,op:e.op.DEL},f)},removeAll:function(e){var c=this;c._toSend({op:c.op.CLEAR},e)},_toSend:function(f,g){var e=this;var c={request:{key:f.key,id:++this._id,op:f.op,value:f.value},callback:g};if(e._iframeReady){e._sendRequest(c)}else{e._queue.push(c)}if(!e._iframe){e.init()}},_sendRequest:function(e){var c=this;c._requests[e.request.id]=e;c._iframe.contentWindow.postMessage(JSON.stringify(e.request),c.origin)},_iframeLoaded:function(){var f=this;f._iframeReady=true;if(f._queue.length){for(var e=0,c=this._queue.length;e<c;e++){f._sendRequest(f._queue[e])}f._queue=[]}},_handleMessage:function(c){var f=this;var e=JSON.parse(c.data);f._requests[e.id].callback&&f._requests[e.id].callback(e.key,e.value);delete f._requests[e.id]}});b.clazz=a});